
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>What is going on under your JavaScript code - My Blog</title>
	<meta name="author" content="Noppanit Charassinvichai">

	
	<meta name="description" content="Disclaimer I’m no expert in this field nor having a PhD in Compiler. This is just my pure curiosity and I hope to share of what I’ve discovered so &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
	<link rel="canonical" href=" https://www.noppanit.com/what-is-going-on-under-your-javascript-code/" />
	<link href="/favicon.png" rel="shortcut icon">
	<style>
		@font-face{font-family:'FontAwesome';src:url("/font/fontawesome-webfont.eot");src:url("/font/fontawesome-webfont.eot?#iefix") format("embedded-opentype"),url("/font/fontawesome-webfont.woff") format("woff"),url("/font/fontawesome-webfont.ttf") format("truetype"),url("/font/fontawesome-webfont.svgz#FontAwesomeRegular") format("svg"),url("/font/fontawesome-webfont.svg#FontAwesomeRegular") format("svg");font-weight:normal;font-style:normal}*{margin:0;padding:0}body{font-family:"HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;font-size:14px;background:#eee;color:#666}@media screen and (max-width: 1040px){body{margin:0 20px}}@media screen and (max-width: 600px){body{font-size:13px}}h1{font-size:1.8em}h2{font-size:1.5em}h3{font-size:1.3em}a{text-decoration:none;outline-width:0;color:#258fb8}.alignleft{float:left}.alignright{float:right}.clearfix{*zoom:1}.clearfix:after{content:"";display:table;clear:both}.inner{width:1000px;margin:0 auto}@media screen and (max-width: 1040px){.inner{width:100%}}.pullquote-right:before,.pullquote-left:before{padding:0;border:none;content:attr(data-pullquote);float:right;width:45%;margin:.5em 0 1em 1.5em;position:relative;top:7px;font-size:1.4em;line-height:1.45em}.pullquote-left:before{float:left;margin:.5em 1.5em 1em 0}#header{height:30px;padding:30px 0;border-bottom:1px solid #ddd;line-height:30px}@media screen and (max-width: 1040px){#header{height:auto;position:relative;padding-bottom:10px}}#header a{color:#666;-moz-transition:color 0.3s;-o-transition:color 0.3s;-webkit-transition:color 0.3s;transition:color 0.3s}#header a:hover{color:#258fb8}#header h1{float:left;font-weight:300;font-size:30px}@media screen and (max-width: 1040px){#header h1{float:none}}#main-nav{float:left;margin-left:30px}@media screen and (max-width: 1040px){#main-nav{float:none;margin-left:0;margin-top:15px}}@media screen and (max-width: 600px){#main-nav>ul{display:none}}#main-nav>ul>li{margin-left:50px;display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline}@media screen and (max-width: 1040px){#main-nav>ul>li{margin-left:0;margin-right:50px}#main-nav>ul>li:last-of-type{margin-right:0}}#main-nav>ul>li:hover>a{color:#258fb8}#main-nav>ul>li>a{padding:38px 0;margin-top:-38px}#main-nav>ul>li>a:after{content:"\f078";color:#ccc;font:12px FontAwesome;padding-left:10px}#main-nav>ul>li>a:only-child:after{content:""}@media screen and (max-width: 1040px){#main-nav>ul>li>a{padding:18px 0}}#main-nav>ul ul{position:absolute;top:60px;left:-15px;z-index:10;white-space:nowrap;background:#ddd;border:1px solid #ccc;list-style:none;display:none;-moz-box-shadow:0 4px 8px rgba(0,0,0,0.1);-webkit-box-shadow:0 4px 8px rgba(0,0,0,0.1);box-shadow:0 4px 8px rgba(0,0,0,0.1);-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}@media screen and (max-width: 1040px){#main-nav>ul ul{top:40px}}#main-nav>ul ul ul{-moz-border-radius:0 5px 5px 5px;-webkit-border-radius:0;border-radius:0 5px 5px 5px}#main-nav>ul ul li{border-top:1px solid #eee;border-bottom:1px solid #ccc}#main-nav>ul ul li:hover{background:#d5d5d5}#main-nav>ul ul li:first-of-type{border-top:none}#main-nav>ul ul li:first-of-type ul{-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}#main-nav>ul ul li:last-of-type{border-bottom:none}#main-nav>ul ul li>a{display:block;padding:5px 15px}#main-nav>ul ul li>a:after{content:"\f054";color:#999;font:12px FontAwesome;padding-left:10px}#main-nav>ul ul li>a:hover{color:#666}#main-nav>ul ul li>a:only-child:after{content:""}#main-nav>ul ul ul{top:0;left:100%}#main-nav>ul li{position:relative}#main-nav>ul li:hover>ul{display:block}#main-nav select{display:none;margin-bottom:10px}@media screen and (max-width: 600px){#main-nav select{display:block}}#mobile-nav{display:none;height:37px;position:relative}@media screen and (max-width: 600px){#mobile-nav{display:block}}#mobile-nav a{display:block}#mobile-nav .button{cursor:pointer}#mobile-nav .container{display:none}#mobile-nav .menu{position:relative;width:100%}#mobile-nav .menu .button{background:#f2f2f2;border:1px solid #ddd;color:#999;padding:0 60px 0 10px;position:relative;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}#mobile-nav .menu .button:hover{color:#999}#mobile-nav .menu .button.on{color:#666;-moz-border-radius:5px 5px 5px 0;-webkit-border-radius:5px;border-radius:5px 5px 5px 0}#mobile-nav .menu .button.on:before{content:"\f077"}#mobile-nav .menu .button:before{content:"\f078";color:#ddd;font:16px FontAwesome;line-height:30px;position:absolute;top:0;right:40px}#mobile-nav .menu .container{background:#f2f2f2;border:1px solid #ddd;border-top:none;position:absolute;top:31px;z-index:1;-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}#mobile-nav .menu .container ul{list-style:none}#mobile-nav .menu .container ul ul{margin-left:20px}#mobile-nav .menu .container a{padding:0 10px}#mobile-nav .search{position:absolute;top:0;right:0}#mobile-nav .search .button{background:#ddd;width:30px;height:30px;position:absolute;top:1px;right:-1px;-moz-border-radius:0 5px 5px 0;-webkit-border-radius:0;border-radius:0 5px 5px 0}#mobile-nav .search .button:before{content:"\f002";color:#f2f2f2;font:20px FontAwesome;line-height:30px;position:absolute;top:0;left:7px}#mobile-nav .search .button.on{background:#ccc}#mobile-nav .search .button.on:before{content:"\f00d"}#mobile-nav .search .container{position:absolute;right:51px;z-index:1}#mobile-nav .search input[type="text"]{background:#fff;border:1px solid #ddd;border-right:none;color:#999;font:13px "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;height:30px;width:100%;padding:0 10px;-moz-border-radius:5px 0 0 5px;-webkit-border-radius:5px;border-radius:5px 0 0 5px}@media screen and (max-width: 1040px){#sub-nav{position:absolute;top:30px;right:0}}@media screen and (max-width: 600px){#sub-nav{display:none}}#sub-nav .search{float:left;margin-top:1px;position:relative}@media screen and (max-width: 1040px){#sub-nav .search{float:none;margin-top:15px}}#sub-nav .search:before{content:"\f002";color:#ccc;font:18px FontAwesome;line-height:30px;position:absolute;top:0;right:125px}#sub-nav .search input[type="text"]{background:#f2f2f2;color:#999;border:1px solid #ddd;font:13px "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;padding:6px 15px 6px 35px;width:100px;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s;-moz-border-radius:15px;-webkit-border-radius:15px;border-radius:15px}#sub-nav .search input[type="text"]:focus,#sub-nav .search input[type="text"]:active{background:#fff;border-top:1px solid #ccc;color:#666;outline:none}#sub-nav .social{float:left;margin-right:15px}@media screen and (max-width: 1040px){#sub-nav .social{float:none;margin-right:0}#sub-nav .social a:last-of-type{margin-right:0}}#sub-nav .social a{-moz-border-radius:50%;-webkit-border-radius:50%;border-radius:50%;display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;text-indent:-9999px;margin-right:15px;opacity:0.5;width:28px;height:28px;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}#sub-nav .social a:hover{opacity:1}#sub-nav .social a.facebook{background:url('/images/social/facebook.png?1443976015') center no-repeat #3B5998;border:1px solid #3B5998}#sub-nav .social a.facebook:hover{border:1px solid #2d4373}#sub-nav .social a.google{background:url('/images/social/google.png?1443976015') center no-repeat #C83D20;border:1px solid #C83D20}#sub-nav .social a.google:hover{border:1px solid #9c3019}#sub-nav .social a.twitter{background:url('/images/social/twitter.png?1443976015') center no-repeat #55CFF8;border:1px solid #55CFF8}#sub-nav .social a.twitter:hover{border:1px solid #24c1f6}#sub-nav .social a.github{background:url('/images/social/github.png?1443976015') center no-repeat #afb6ca;border:1px solid #afb6ca}#sub-nav .social a.github:hover{border:1px solid #909ab6}#sub-nav .social a.coderwall{background:url('/images/social/coderwall.png?1443976015') center no-repeat #3a729f;border:1px solid #3a729f}#sub-nav .social a.coderwall:hover{border:1px solid #2c577a}#sub-nav .social a.pinboard{background:url('/images/social/pinboard.png?1443976015') center no-repeat #0066c8;border:1px solid #3a729f}#sub-nav .social a.pinboard:hover{border:1px solid #0052cc}#sub-nav .social a.linkedin{background:url('/images/social/linkedin.png?1443976015') center no-repeat #005A87;border:1px solid #005A87}#sub-nav .social a.linkedin:hover{border:1px solid #003854}#sub-nav .social a.pinterest{background:url('/images/social/pinterest.png?1443976015') center no-repeat #be4037;border:1px solid #be4037}#sub-nav .social a.pinterest:hover{border:1px solid #96332c}#sub-nav .social a.delicious{background:url('/images/social/delicious.png?1443976015') center no-repeat #3271cb;border:1px solid #3271cb}#sub-nav .social a.delicious:hover{border:1px solid #285aa2}#sub-nav .social a.rss{background:url('/images/social/rss.png?1443976015') center no-repeat #ef7522;border:1px solid #ef7522}#sub-nav .social a.rss:hover{border:1px solid #cf5d0f}#sub-nav .social a.instagram{background:url('/images/social/instagram.png?1443976015') center no-repeat #406e95;border:1px solid #406e95}#sub-nav .social a.instagram:hover{border:1px solid #315471}#pagenavi{padding:20px 0;height:20px;line-height:20px;position:relative;border-top:1px solid #fff;border-bottom:1px solid #ddd}#pagenavi a:hover{text-decoration:underline}#pagenavi .prev,#pagenavi .next{position:absolute}#pagenavi .prev{padding-left:30px;left:0}#pagenavi .prev:before{content:"\f060";font:1.3em FontAwesome;position:absolute;left:0}#pagenavi .next{padding-right:30px;right:0}#pagenavi .next:before{content:"\f061";font:1.3em FontAwesome;position:absolute;right:0}#pagenavi .center{text-align:center;width:100%;display:block}@media screen and (max-width: 400px){#pagenavi .center{display:none}}article{border-bottom:1px solid #ddd;border-top:1px solid #fff;padding:30px 0;position:relative}@media screen and (max-width: 800px){article{padding-bottom:15px}}@media screen and (max-width: 600px){article{padding:15px 0}}article h2.title{font-size:1.8em;font-weight:300;line-height:35px;margin-bottom:20px}article h2.title a{color:#666}article .entry-content{line-height:2;text-align:justify}article .entry-content a:hover{text-decoration:underline}article .entry-content .more-link{display:block;margin-top:16px;padding-left:30px;position:relative}article .entry-content .more-link:before{content:"\f061";font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}article .entry-content p,article .entry-content blockquote,article .entry-content ul,article .entry-content ol,article .entry-content dl,article .entry-content table,article .entry-content iframe,article .entry-content h1,article .entry-content h2,article .entry-content h3,article .entry-content h4,article .entry-content h5,article .entry-content h6,article .entry-content .video-container{margin-top:10px}article .entry-content ul,article .entry-content ol,article .entry-content dl{margin-left:20px}article .entry-content ul ul,article .entry-content ul ol,article .entry-content ul dl,article .entry-content ol ul,article .entry-content ol ol,article .entry-content ol dl,article .entry-content dl ul,article .entry-content dl ol,article .entry-content dl dl{margin-top:0}article .entry-content strong{font-weight:bold}article .entry-content em{font-style:italic}article .entry-content p{margin-top:10px}article .entry-content h2{font-weight:300;border-bottom:1px solid #ddd;position:relative}article .entry-content h2:before{content:"";position:absolute;bottom:-2px;border-bottom:1px solid #fff;width:100%}article .entry-content img,article .entry-content video{max-width:100%;height:auto}article .entry-content blockquote{background:#ddd;border-left:5px solid #ccc;padding:15px 20px;margin-top:10px}article .entry-content blockquote>p:first-of-type{margin-top:0}article .entry-content iframe{border:none}article .entry-content table{background:#ddd;border:1px solid #ccc;border-spacing:0;margin-top:10px}article .entry-content table th{background:#ccc;padding:0 15px}article .entry-content table td{text-align:center}article .entry-content table tr:nth-of-type(2n){background:#d5d5d5}article .entry-content .caption{display:block;font-size:0.9em;color:#999;padding-left:25px;position:relative}article .entry-content .caption:before{content:"\f040";color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}article .entry-content .video-container{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden}article .entry-content .video-container iframe,article .entry-content .video-container object,article .entry-content .video-container embed{position:absolute;top:0;left:0;width:100%;height:100%;margin-top:0}.share{padding:15px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}.post h2.title,.post .entry-content{margin-left:200px}@media screen and (max-width: 800px){.post h2.title,.post .entry-content{margin-left:0}}.post .meta{position:absolute;top:85px;line-height:2;font-size:0.9em;color:#999;width:170px}@media screen and (max-width: 800px){.post .meta{margin-top:15px;position:static;width:auto}}.post .meta a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}.post .meta a:hover{color:#666}.post .meta .date,.post .meta .tags,.post .meta .comments{padding-left:30px;position:relative}.post .meta .date:before,.post .meta .tags:before,.post .meta .comments:before{color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}@media screen and (max-width: 800px){.post .meta .date,.post .meta .tags,.post .meta .comments{display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;margin-right:30px}}.post .meta .date:before{content:"\f073"}.post .meta .tags:before{content:"\f02c"}.post .meta .comments:before{content:"\f075"}.archives{position:relative}.archives:last-of-type:before{content:"";position:absolute;bottom:0;width:200px;border-top:1px solid #ddd}.archives .year{line-height:35px;width:200px;position:absolute;top:0;padding-top:15px;border-top:1px solid #fff}.archives .year:before{content:"";position:absolute;top:-2px;width:100%;border-top:1px solid #ddd}@media screen and (max-width: 600px){.archives .year{position:relative;width:100%}}.archives article{margin-left:200px;padding:15px 0}@media screen and (max-width: 600px){.archives article{margin-left:0}.archives article:first-of-type{border-top:none;padding-top:30px}}.archives article .title{margin-bottom:0}.archives article .meta{line-height:2;font-size:0.9em;color:#999;margin-top:15px}@media screen and (max-width: 600px){.archives article .meta{display:none}}.archives article .meta a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}.archives article .meta a:hover{color:#666}.archives article .meta .date,.archives article .meta .tags,.archives article .meta .comments{padding-left:30px;position:relative}.archives article .meta .date:before,.archives article .meta .tags:before,.archives article .meta .comments:before{color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}@media screen and (max-width: 600px){.archives article .meta .date,.archives article .meta .tags,.archives article .meta .comments{display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;margin-right:30px}}.archives article .meta .date:before{content:"\f073"}.archives article .meta .tags:before{content:"\f02c"}.archives article .meta .comments:before{content:"\f075"}#comment{padding:30px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}#comment h2.title{font-size:25px;font-weight:300;line-height:35px;margin-bottom:20px}footer{padding:15px 0;border-top:1px solid #fff;text-align:center;font-size:0.9em}article code,article pre{background:#ddd;border:1px solid #ccc;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace}article code{font-size:0.9em;padding:1px 3px;margin:0 3px;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}article pre{font-size:1 / 0.9em;line-height:1.5;margin-top:10px;padding:5px 15px;overflow-x:auto;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}article pre code{background:none;border:none;padding:0;margin:0;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}figure.code{background:#ddd;border:1px solid #ccc;margin-top:10px;padding:5px 15px;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}figure.code figcaption{font-size:0.9em;position:relative}figure.code figcaption span{margin:-5px -15px 0;padding:5px 15px;display:block;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cccccc),color-stop(100%, #dddddd));background:-moz-linear-gradient(top, #cccccc,#dddddd);background:-webkit-linear-gradient(top, #cccccc,#dddddd);background:linear-gradient(to bottom, #cccccc,#dddddd)}figure.code figcaption span:empty{display:none}figure.code figcaption a{position:absolute;top:5px;right:0}figure.code code,figure.code pre{background:none;border:none;padding:0;margin:0;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}figure.code .highlight{overflow-x:auto}figure.code .line-numbers{border-right:1px solid #ccc;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;padding-right:15px;text-align:right}figure.code table{border:none;text-align:left;margin-top:0}figure.code table td{text-align:left}figure.code td.code{width:100%;padding-left:15px;overflow-x:auto}.entry-content .gist{background:#ddd;color:#666;padding:30px 15px 5px;margin-top:10px;border:1px solid #ccc;position:relative;overflow:hidden;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.entry-content .gist .gist-file{margin:0}.entry-content .gist .gist-file .gist-data{background:none;border:none}.entry-content .gist .gist-file .gist-data pre{font:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;line-height:inherit;text-align:left}.entry-content .gist .gist-file .gist-meta{font:300 0.9em "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;line-height:1.5;margin:0 -16px -6px;padding:5px 15px;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #dddddd),color-stop(100%, #cccccc));background:-moz-linear-gradient(top, #dddddd,#cccccc);background:-webkit-linear-gradient(top, #dddddd,#cccccc);background:linear-gradient(to bottom, #dddddd,#cccccc)}.entry-content .gist .gist-file .gist-meta a{color:#258fb8}.entry-content .gist .gist-file .gist-meta a:first-of-type{position:absolute;top:5px;right:15px;z-index:1}.entry-content .gist .gist-file .gist-meta a:nth-of-type(2){position:absolute;top:0;left:0;padding:5px 15px;width:100%;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cccccc),color-stop(100%, #dddddd));background:-moz-linear-gradient(top, #cccccc,#dddddd);background:-webkit-linear-gradient(top, #cccccc,#dddddd);background:linear-gradient(to bottom, #cccccc,#dddddd)}figure.code .c,.gist-highlight .c{color:#93a1a1 !important;font-style:italic !important}figure.code .cm,.gist-highlight .cm{color:#93a1a1 !important;font-style:italic !important}figure.code .cp,.gist-highlight .cp{color:#93a1a1 !important;font-style:italic !important}figure.code .c1,.gist-highlight .c1{color:#93a1a1 !important;font-style:italic !important}figure.code .cs,.gist-highlight .cs{color:#93a1a1 !important;font-weight:bold !important;font-style:italic !important}figure.code .err,.gist-highlight .err{color:#dc322f !important;background:none !important}figure.code .k,.gist-highlight .k{color:#cb4b16 !important}figure.code .o,.gist-highlight .o{color:#586e75 !important;font-weight:bold !important}figure.code .p,.gist-highlight .p{color:#586e75 !important}figure.code .ow,.gist-highlight .ow{color:#2aa198 !important;font-weight:bold !important}figure.code .gd,.gist-highlight .gd{color:#586e75 !important;background-color:#f5c5b6 !important;display:inline-block}figure.code .gd .x,.gist-highlight .gd .x{color:#586e75 !important;background-color:#f1b1a4 !important;display:inline-block}figure.code .ge,.gist-highlight .ge{color:#586e75 !important;font-style:italic !important}figure.code .gh,.gist-highlight .gh{color:#93a1a1 !important}figure.code .gi,.gist-highlight .gi{color:#586e75 !important;background-color:#e5e3b6 !important;display:inline-block}figure.code .gi .x,.gist-highlight .gi .x{color:#586e75 !important;background-color:#cdd188 !important;display:inline-block}figure.code .gs,.gist-highlight .gs{color:#586e75 !important;font-weight:bold !important}figure.code .gu,.gist-highlight .gu{color:#6c71c4 !important}figure.code .kc,.gist-highlight .kc{color:#859900 !important;font-weight:bold !important}figure.code .kd,.gist-highlight .kd{color:#268bd2 !important}figure.code .kp,.gist-highlight .kp{color:#cb4b16 !important;font-weight:bold !important}figure.code .kr,.gist-highlight .kr{color:#d33682 !important;font-weight:bold !important}figure.code .kt,.gist-highlight .kt{color:#2aa198 !important}figure.code .n,.gist-highlight .n{color:#268bd2 !important}figure.code .na,.gist-highlight .na{color:#268bd2 !important}figure.code .nb,.gist-highlight .nb{color:#859900 !important}figure.code .nc,.gist-highlight .nc{color:#d33682 !important}figure.code .no,.gist-highlight .no{color:#b58900 !important}figure.code .nl,.gist-highlight .nl{color:#859900 !important}figure.code .ne,.gist-highlight .ne{color:#268bd2 !important;font-weight:bold !important}figure.code .nf,.gist-highlight .nf{color:#268bd2 !important;font-weight:bold !important}figure.code .nn,.gist-highlight .nn{color:#b58900 !important}figure.code .nt,.gist-highlight .nt{color:#268bd2 !important;font-weight:bold !important}figure.code .nx,.gist-highlight .nx{color:#b58900 !important}figure.code .vg,.gist-highlight .vg{color:#268bd2 !important}figure.code .vi,.gist-highlight .vi{color:#268bd2 !important}figure.code .nv,.gist-highlight .nv{color:#268bd2 !important}figure.code .mf,.gist-highlight .mf{color:#2aa198 !important}figure.code .m,.gist-highlight .m{color:#2aa198 !important}figure.code .mh,.gist-highlight .mh{color:#2aa198 !important}figure.code .mi,.gist-highlight .mi{color:#2aa198 !important}figure.code .s,.gist-highlight .s{color:#2aa198 !important}figure.code .sd,.gist-highlight .sd{color:#2aa198 !important}figure.code .s2,.gist-highlight .s2{color:#2aa198 !important}figure.code .se,.gist-highlight .se{color:#dc322f !important}figure.code .si,.gist-highlight .si{color:#268bd2 !important}figure.code .sr,.gist-highlight .sr{color:#2aa198 !important}figure.code .s1,.gist-highlight .s1{color:#2aa198 !important}#banner{color:#999;padding:30px 0;line-height:30px;text-align:center;position:relative;display:none;border-top:1px solid #fff;border-bottom:1px solid #ddd}#banner:hover a{color:#258fb8}#banner a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}#banner a:hover{text-decoration:underline}#banner small{position:absolute;right:0;bottom:0}#banner .loading{background:url('/images/loading_pacman.gif?1443976015') center no-repeat;text-indent:-9999px}#banner .container{height:30px;overflow:hidden;position:relative;display:none}#banner .container .feed{list-style:none;position:absolute;top:0;width:100%}#banner .container .feed li{position:relative}#banner .container .feed li small{position:absolute;right:0}/*! fancyBox v2.0.6 fancyapps.com | fancyapps.com/fancybox/#license */.fancybox-tmp iframe,.fancybox-tmp object{vertical-align:top;padding:0;margin:0}.fancybox-wrap{position:absolute;top:0;left:0;z-index:8020}.fancybox-skin{position:relative;padding:0;margin:0;background:#f9f9f9;color:#444;text-shadow:none;-moz-border-radius:4px;-webkit-border-radius:4px;border-radius:4px}.fancybox-opened{z-index:8030}.fancybox-opened .fancybox-skin{-moz-box-shadow:0 10px 25px rgba(0,0,0,0.5);-webkit-box-shadow:0 10px 25px rgba(0,0,0,0.5);box-shadow:0 10px 25px rgba(0,0,0,0.5)}.fancybox-outer,.fancybox-inner{padding:0;margin:0;position:relative;outline:none}.fancybox-inner{overflow:hidden}.fancybox-type-iframe .fancybox-inner{-webkit-overflow-scrolling:touch}.fancybox-error{color:#444;font:14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;margin:0;padding:10px}.fancybox-image,.fancybox-iframe{display:block;width:100%;height:100%;border:0;padding:0;margin:0;vertical-align:top}.fancybox-image{max-width:100%;max-height:100%}#fancybox-loading,.fancybox-close,.fancybox-prev span,.fancybox-next span{background-image:url('/images/fancybox/fancybox_sprite.png?1443976015')}#fancybox-loading{position:fixed;top:50%;left:50%;margin-top:-22px;margin-left:-22px;background-position:0 -108px;opacity:0.8;cursor:pointer;z-index:8020}#fancybox-loading div{width:44px;height:44px;background:url('/images/fancybox/fancybox_loading.gif?1443976015') center center no-repeat}.fancybox-close{position:absolute;top:-18px;right:-18px;width:36px;height:36px;cursor:pointer;z-index:8040}.fancybox-nav{position:absolute;top:0;width:40%;height:100%;cursor:pointer;background:transparent url('/images/fancybox/blank.gif?1443976015');-webkit-tap-highlight-color:transparent;z-index:8040}.fancybox-prev{left:0}.fancybox-next{right:0}.fancybox-nav span{position:absolute;top:50%;width:36px;height:34px;margin-top:-18px;cursor:pointer;z-index:8040;visibility:hidden}.fancybox-prev span{left:20px;background-position:0 -36px}.fancybox-next span{right:20px;background-position:0 -72px}.fancybox-nav:hover span{visibility:visible}.fancybox-tmp{position:absolute;top:-9999px;left:-9999px;padding:0;overflow:visible;visibility:hidden}#fancybox-overlay{position:absolute;top:0;left:0;overflow:hidden;display:none;z-index:8010;background:#000}#fancybox-overlay.overlay-fixed{position:fixed;bottom:0;right:0}.fancybox-title{visibility:hidden;font:normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;position:relative;text-shadow:none;z-index:8050}.fancybox-opened .fancybox-title{visibility:visible}.fancybox-title-float-wrap{position:absolute;bottom:0;right:50%;margin-bottom:-35px;z-index:8030;text-align:center}.fancybox-title-float-wrap .child{display:inline-block;margin-right:-100%;padding:2px 20px;background:transparent;background:rgba(0,0,0,0.8);text-shadow:0 1px 2px #222;color:#FFF;font-weight:bold;line-height:24px;white-space:nowrap;-moz-border-radius:15px;-webkit-border-radius:15px;border-radius:15px}.fancybox-title-outside-wrap{position:relative;margin-top:10px;color:#fff}.fancybox-title-inside-wrap{margin-top:10px}.fancybox-title-over-wrap{position:absolute;bottom:0;left:0;color:#fff;padding:10px;background:#000;background:rgba(0,0,0,0.8)}

	</style>
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">My Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.noppanit.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/noppanit" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/noppanit" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.noppanit.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">What Is Going on Under Your JavaScript Code</h2>
	<div class="entry-content"><p><strong>Disclaimer</strong></p>

<p>I’m no expert in this field nor having a PhD in Compiler. This is just my pure curiosity and I hope to share of what I’ve discovered so people can continue their curiosity.</p>

<h2 id="why-im-interested-in-this">Why I’m interested in this.</h2>
<p>I was asked once during my technical interview, “What happen when you execute fs.readFileSync(‘’)”. What he meant was that how JavaScript code interacts with the machine under the hood. At the time, I thought I just wrote that code and there you go I got the content of the file.</p>

<p>I couldn’t answer and I didn’t get the job. I just recently became a JavaScript developer because of my interest in front-end and back-end in the same time. Knowing JavaScript allows me to get the best of both worlds. However, the only thing I know about JavaScript is that it’s something to do with V8 and I had no idea what’s going on under the hood. So, I took the time to really understand how JavaScript works and the history behind it. So, I started with the task a computer does best; executing commands or how does a computer execute a command.</p>

<h2 id="how-does-computer-works">How does computer works?</h2>
<p>One of the best movies for me is “The Core” where “Rat” had to hack the Internet to control the flow of information. The hacker claims that he only knew one language, “zeros and ones”. At the time, I understood that it’s something to do with binary number, and I thought that it’s just hollywood talk and these people didn’t know what they were talking. I have to write <code>print('Hello');</code> to print <code>Hello</code> on my console, it has nothing to do with zeros or ones.</p>

<p>So, I started digging and I found <a href="https://m.reddit.com/r/learnprogramming/comments/1pv40y/for_those_of_you_wondering_how_code_becomes_ones/">this</a>.</p>

<p>Basically, when we execute a piece of code, the compiler compiles the code to a set of instructions which is Assembly. Then, we have an <a href="https://en.wikipedia.org/wiki/Assembly_language#Assembler">assembler</a> to translate the instructions to their numerical equivalents. For example,</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">ADD esp, 8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>is translated in x86 architecture like this.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">Raw Hex <span class="o">(</span>zero bytes in bold<span class="o">)</span>:
</span><span class="line">
</span><span class="line">83C408
</span><span class="line">
</span><span class="line">String Literal:
</span><span class="line">
</span><span class="line"><span class="s2">&quot;\x83\xC4\x08&quot;</span>
</span><span class="line">
</span><span class="line">Array Literal:
</span><span class="line">
</span><span class="line"><span class="o">{</span> 0x83, 0xC4, 0x08 <span class="o">}</span>
</span><span class="line">
</span><span class="line">Disassembly:
</span><span class="line">0:  <span class="m">83</span> c4 <span class="m">08</span>                add    esp,0x8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Notice the HEX code <code>83C408</code> which you can translate to binary number later for the computer to understand.</p>

<p>You can use this <a href="https://defuse.ca/online-x86-assembler.htm">online assembler</a> to play with it.</p>

<h2 id="how-does-javascript-engine-v8-work">How does JavaScript engine (v8) work?</h2>
<p>In a nutshell, V8 <a href="http://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/">translates JavaScript</a>
code to machine code with <em>JIT (Just-In-Time) compiler</em>.</p>

<p>There are <a href="http://www.mattzeunert.com/2015/08/19/viewing-assembly-code-generated-by-v8.html">four main stages</a> of how the code passes through V8.</p>

<ol>
  <li>
    <p>JavaScript - Your code</p>
  </li>
  <li>
    <p>Hydrogen - Intermediate code</p>
  </li>
  <li>
    <p>Lithium - Machine specific code</p>
  </li>
  <li>
    <p>Machine Code - This is what your computer understand.</p>
  </li>
</ol>

<p>In this post we’re going to see the assembly code which is the machine specific code.</p>

<h2 id="show-me-the-code">Show me the code</h2>
<p>Enough talking. Now show me the code you say. Let’s say you have a simple function to add two numbers together like this.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To view the machine code in Assembly you need to install V8. First you need to install <a href="https://www.chromium.org/developers/how-tos/install-depot-tools">depot-tools</a>. Once you install <code>depot-tools</code> you can run
Follow this <a href="https://github.com/v8/v8/wiki/Using%20Git">instruction</a>.</p>

<p><em>Note</em>: The documentation of how to install V8 is subject to change. So, please refer to <a href="https://github.com/v8/v8/wiki/Building%20with%20GN">link</a>.</p>

<p>In order to get <code>V8</code> you need to run. You will also need <code>Python 2</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">fetch v8
</span><span class="line"><span class="nb">cd </span>v8
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The script will take sometime to finish. It will fetch V8 source code. Then you need to build all the dependencies by running.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">gclient sync
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now you need to install D8. The next step is going to take a long time. So, get yourself a nice cup of coffee.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">make x64.release <span class="nv">objectprint</span><span class="o">=</span>on <span class="nv">disassembler</span><span class="o">=</span>on
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Once everything is in place, you’re ready to see how your code is communicating with your CPU.</p>

<p>You can do this to get the assembly code</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">cd </span>out/x64.release
</span><span class="line">./d8 --print-code ~/Downloads/add.js
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This is what you’re likely going to see.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
</pre></td><td class="code"><pre><code class="nasm"><span class="line"><span class="err">---</span> <span class="nf">Raw</span> <span class="nv">source</span> <span class="o">---</span>
</span><span class="line"><span class="nf">function</span> <span class="nv">add</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span><span class="nv">b</span><span class="p">)</span> <span class="err">{</span>
</span><span class="line">  <span class="nf">return</span> <span class="nv">a</span><span class="o">+</span><span class="nv">b</span><span class="c1">;</span>
</span><span class="line"><span class="err">}</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="err">---</span> <span class="nf">Code</span> <span class="o">---</span>
</span><span class="line"><span class="nf">source_position</span> <span class="err">=</span> <span class="mi">0</span>
</span><span class="line"><span class="nf">kind</span> <span class="err">=</span> <span class="nv">FUNCTION</span>
</span><span class="line"><span class="nf">compiler</span> <span class="err">=</span> <span class="nv">full</span><span class="o">-</span><span class="nv">codegen</span>
</span><span class="line"><span class="nf">Instructions</span> <span class="p">(</span><span class="nb">si</span><span class="nv">ze</span> <span class="err">=</span> <span class="mi">140</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043e0</span>     <span class="mi">0</span>  <span class="mi">55</span>             <span class="nv">push</span> <span class="nb">rbp</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043e1</span>     <span class="mi">1</span>  <span class="mi">4889</span><span class="nv">e5</span>         <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rbp</span><span class="p">,</span><span class="nb">rsp</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043e4</span>     <span class="mi">4</span>  <span class="mi">56</span>             <span class="nv">push</span> <span class="nb">rsi</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043e5</span>     <span class="mi">5</span>  <span class="mi">57</span>             <span class="nv">push</span> <span class="nb">rdi</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043e6</span>     <span class="mi">6</span>  <span class="mi">488</span><span class="nv">b4f2f</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rcx</span><span class="p">,[</span><span class="nb">rdi</span><span class="o">+</span><span class="mh">0x2f</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043ea</span>    <span class="mi">10</span>  <span class="mi">488</span><span class="nv">b490f</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rcx</span><span class="p">,[</span><span class="nb">rcx</span><span class="o">+</span><span class="mh">0xf</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043ee</span>    <span class="mi">14</span>  <span class="mi">83411</span><span class="nv">b01</span>       <span class="nv">addl</span> <span class="p">[</span><span class="nb">rcx</span><span class="o">+</span><span class="mh">0x1b</span><span class="p">],</span><span class="mh">0x1</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043f2</span>    <span class="mi">18</span>  <span class="mi">49</span><span class="nv">ba81bb8a39e52a0000</span> <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nv">r10</span><span class="p">,</span><span class="mh">0x2ae5398abb81</span>    <span class="c1">;; object: 0x2ae5398abb81 &lt;FixedArray[2]&gt;</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043fc</span>    <span class="mi">28</span>  <span class="mi">4152</span>           <span class="nv">push</span> <span class="nv">r10</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043fe</span>    <span class="mi">30</span>  <span class="mi">6</span><span class="nv">a00</span>           <span class="nv">push</span> <span class="mh">0x0</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804400</span>    <span class="mi">32</span>  <span class="mi">488</span><span class="nv">b45f0</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rax</span><span class="p">,[</span><span class="nb">rbp</span><span class="o">-</span><span class="mh">0x10</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804404</span>    <span class="mi">36</span>  <span class="mi">488</span><span class="nv">b402f</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rax</span><span class="p">,[</span><span class="nb">rax</span><span class="o">+</span><span class="mh">0x2f</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804408</span>    <span class="mi">40</span>  <span class="mi">488</span><span class="nv">b400f</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rax</span><span class="p">,[</span><span class="nb">rax</span><span class="o">+</span><span class="mh">0xf</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280440c</span>    <span class="mi">44</span>  <span class="mi">50</span>             <span class="nv">push</span> <span class="nb">rax</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280440d</span>    <span class="mi">45</span>  <span class="nv">b803000000</span>     <span class="nv">movl</span> <span class="nb">rax</span><span class="p">,</span><span class="mh">0x3</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804412</span>    <span class="mi">50</span>  <span class="mi">48</span><span class="nv">bb80753e1001000000</span> <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rbx</span><span class="p">,</span><span class="mh">0x1103e7580</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280441c</span>    <span class="mi">60</span>  <span class="nv">e81fffefff</span>     <span class="nv">call</span> <span class="mh">0x27f392704340</span>     <span class="c1">;; code: STUB, CEntryStub, minor: 8</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804421</span>    <span class="mi">65</span>  <span class="mi">493</span><span class="nv">ba5200c0000</span> <span class="nv">REX.W</span> <span class="nv">cmpq</span> <span class="nb">rsp</span><span class="p">,[</span><span class="nv">r13</span><span class="o">+</span><span class="mh">0xc20</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804428</span>    <span class="mi">72</span>  <span class="mi">7305</span>           <span class="nv">jnc</span> <span class="mi">79</span>  <span class="p">(</span><span class="mh">0x27f39280442f</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280442a</span>    <span class="mi">74</span>  <span class="nv">e811e6f4ff</span>     <span class="nv">call</span> <span class="nv">StackCheck</span>  <span class="p">(</span><span class="mh">0x27f392752a40</span><span class="p">)</span>    <span class="c1">;; code: BUILTIN</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280442f</span>    <span class="mi">79</span>  <span class="mi">498</span><span class="nv">b45a0</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rax</span><span class="p">,[</span><span class="nv">r13</span><span class="o">-</span><span class="mh">0x60</span><span class="p">]</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804433</span>    <span class="mi">83</span>  <span class="mi">48</span><span class="nv">bba9ba8a39e52a0000</span> <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rbx</span><span class="p">,</span><span class="mh">0x2ae5398abaa9</span>    <span class="c1">;; object: 0x2ae5398abaa9 Cell for 6144</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280443d</span>    <span class="mi">93</span>  <span class="mi">83430</span><span class="nv">bd1</span>       <span class="nv">addl</span> <span class="p">[</span><span class="nb">rbx</span><span class="o">+</span><span class="mh">0xb</span><span class="p">],</span><span class="mh">0xd1</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804441</span>    <span class="mi">97</span>  <span class="mi">791</span><span class="nv">f</span>           <span class="nv">jns</span> <span class="mi">130</span>  <span class="p">(</span><span class="mh">0x27f392804462</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804443</span>    <span class="mi">99</span>  <span class="mi">50</span>             <span class="nv">push</span> <span class="nb">rax</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804444</span>   <span class="mi">100</span>  <span class="nv">e877e5f4ff</span>     <span class="nv">call</span> <span class="nv">InterruptCheck</span>  <span class="p">(</span><span class="mh">0x27f3927529c0</span><span class="p">)</span>    <span class="c1">;; code: BUILTIN</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804449</span>   <span class="mi">105</span>  <span class="mi">58</span>             <span class="nv">pop</span> <span class="nb">rax</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280444a</span>   <span class="mi">106</span>  <span class="mi">48</span><span class="nv">bba9ba8a39e52a0000</span> <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nb">rbx</span><span class="p">,</span><span class="mh">0x2ae5398abaa9</span>    <span class="c1">;; object: 0x2ae5398abaa9 Cell for 6144</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804454</span>   <span class="mi">116</span>  <span class="mi">49</span><span class="nv">ba0000000000180000</span> <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="nv">r10</span><span class="p">,</span><span class="mh">0x180000000000</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280445e</span>   <span class="mi">126</span>  <span class="mi">4</span><span class="nv">c895307</span>       <span class="nv">REX.W</span> <span class="nv">movq</span> <span class="p">[</span><span class="nb">rbx</span><span class="o">+</span><span class="mh">0x7</span><span class="p">],</span><span class="nv">r10</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804462</span>   <span class="mi">130</span>  <span class="nv">c9</span>             <span class="nv">leavel</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804463</span>   <span class="mi">131</span>  <span class="nv">c20800</span>         <span class="nv">ret</span> <span class="mh">0x8</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804466</span>   <span class="mi">134</span>  <span class="mi">6690</span>           <span class="nv">nop</span>
</span><span class="line">
</span><span class="line"><span class="nf">Source</span> <span class="nv">positions</span><span class="p">:</span>
</span><span class="line"> <span class="nf">pc</span> <span class="nv">offset</span>  <span class="nv">position</span>
</span><span class="line">         <span class="err">0</span>         <span class="err">0</span>
</span><span class="line">       <span class="err">130</span>        <span class="err">35</span>  <span class="nf">statement</span>
</span><span class="line">
</span><span class="line"><span class="nf">Deoptimization</span> <span class="nv">Output</span> <span class="nv">Data</span> <span class="p">(</span><span class="nv">deopt</span> <span class="nv">points</span> <span class="err">=</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="nf">Back</span> <span class="nv">edges</span> <span class="p">(</span><span class="nb">si</span><span class="nv">ze</span> <span class="err">=</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="line"><span class="nf">ast_id</span>  <span class="nv">pc_offset</span>  <span class="nv">loop_depth</span>
</span><span class="line">
</span><span class="line"><span class="err">0</span><span class="nl">x2ae5398abbb9:</span> <span class="err">[</span><span class="nf">TypeFeedbackInfo</span><span class="p">]</span>
</span><span class="line"> <span class="err">-</span> <span class="nl">ic_total_count:</span> <span class="err">0,</span> <span class="nl">ic_with_type_info_count:</span> <span class="err">0,</span> <span class="nl">ic_generic_count:</span> <span class="err">0</span>
</span><span class="line">
</span><span class="line"><span class="nf">RelocInfo</span> <span class="p">(</span><span class="nb">si</span><span class="nv">ze</span> <span class="err">=</span> <span class="mi">6</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f3928043f4</span>  <span class="nv">embedded</span> <span class="nv">object</span>  <span class="p">(</span><span class="mh">0x2ae5398abb81</span> <span class="o">&lt;</span><span class="nv">FixedArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">&gt;</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280441d</span>  <span class="nv">code</span> <span class="nv">target</span> <span class="p">(</span><span class="nv">STUB</span><span class="p">)</span>  <span class="p">(</span><span class="mh">0x27f392704340</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280442b</span>  <span class="nv">code</span> <span class="nv">target</span> <span class="p">(</span><span class="nv">BUILTIN</span><span class="p">)</span>  <span class="p">(</span><span class="mh">0x27f392752a40</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804435</span>  <span class="nv">embedded</span> <span class="nv">object</span>  <span class="p">(</span><span class="mh">0x2ae5398abaa9</span> <span class="nv">Cell</span> <span class="nv">for</span> <span class="mi">6144</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f392804445</span>  <span class="nv">code</span> <span class="nv">target</span> <span class="p">(</span><span class="nv">BUILTIN</span><span class="p">)</span>  <span class="p">(</span><span class="mh">0x27f3927529c0</span><span class="p">)</span>
</span><span class="line"><span class="err">0</span><span class="nf">x27f39280444c</span>  <span class="nv">embedded</span> <span class="nv">object</span>  <span class="p">(</span><span class="mh">0x2ae5398abaa9</span> <span class="nv">Cell</span> <span class="nv">for</span> <span class="mi">6144</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="err">---</span> <span class="nf">End</span> <span class="nv">code</span> <span class="o">---</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>~~Now, in theory you can grab the hex code and run that in C and you should be able to get the same result. I haven’t tried it please let me know if it works or not.~~ It wouldn’t work because the generated code has fixed memory address from when the program was executed.</p>

<p>What I learn from this post is how is my JavaScript code executed in my computer and the next time I got asked, I will be able to answer that interview question. Sometimes, it’s nicer to be asked a question like this than how to revert a binary tree on a whiteboard. Don’t you think?</p>

<p>More info</p>

<ol>
  <li>
    <p><a href="https://gist.github.com/kevincennis/0cd2138c78a07412ef21">V8 Cheatsheet</a></p>
  </li>
  <li>
    <p><a href="https://wingolog.org/archives/2011/06/08/what-does-v8-do-with-that-loop">What does V8 do with that loop</a></p>
  </li>
  <li>
    <p><a href="https://www.youtube.com/watch?v=yOyaJXpAYZQ">Comparing C to machine language (video)</a></p>
  </li>
  <li>
    <p><a href="https://wingolog.org/archives/2011/08/02/a-closer-look-at-crankshaft-v8s-optimizing-compiler">A closer look at crankshaft v8s optimizing compiler</a></p>
  </li>
</ol>
</div>


<div class="meta">
	<div class="date">




Oct 4th, 2016</div>
	<div class="tags">


	<a class='category' href='/blog/categories/assembly/'>assembly</a>, <a class='category' href='/blog/categories/javascript/'>javascript</a>, <a class='category' href='/blog/categories/v8/'>v8</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2017

    Noppanit Charassinvichai

</footer>
	<script src="/javascripts/slash.js"></script>
<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
<!-- <script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'noppanit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://www.noppanit.com/what-is-going-on-under-your-javascript-code/';
        var disqus_url = 'https://www.noppanit.com/what-is-going-on-under-your-javascript-code/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-11403715-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>