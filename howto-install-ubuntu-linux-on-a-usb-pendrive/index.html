
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>HowTo : Install Ubuntu Linux on a USB Pendrive - My Blog</title>
  <meta name="author" content="Noppanit Charassinvichai">

  
  <meta name="description" content="Someday, I woke up and browse to site www.astalavista.com I found this topic, I immediately interesting on it. Because I used to use Ubuntu to work &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://noppanit.github.io/howto-install-ubuntu-linux-on-a-usb-pendrive/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">My Blog</a></h1>
  
    <h2>My Blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="noppanit.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">HowTo : Install Ubuntu Linux on a USB Pendrive</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2007-03-29T00:00:00-04:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2007</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Someday, I woke up and browse to site <a href="http://www.astalavista.com">www.astalavista.com</a> I found this topic, I immediately interesting on it. Because I used to use Ubuntu to work before, and I have USB, most importance I encountered with the situation to use Linux LIVE CD to boot and backup all my work in windows XP, So I think this topic is very useful.</p>

<p>This tutorial will show how-to install Ubuntu on a usb stick. Even though this tutorial uses Ubuntu as its base distribution, you could virtually use any type of Linux liveCD distribution.</p>

<p>Being able to run Linux out of a usb bar is a great way to enjoy the live CD experience (being able to use Linux on any computer you might get by) and the big advantage of being easier to carry around than a CD.</p>

<h2>1. Requirements</h2>

<p>In order to reproduce this tutorial, you will need a few items such as:</p>

<ul>
<li>a ubuntu liveCD</li>
<li>a usb bar of at least 1G</li>
<li>a running Linux operating system</li>
</ul>


<p>Now that you have all this, it is time to prepare you USB bar do host the Ubuntu liveCD files.</p>

<h2>2. Setting up the USB disk</h2>

<h3>2.1. Finding the device</h3>

<p>In the first place, you need to plug your usb drive and check under which device it is associated. To find out the device, run:</p>

<blockquote><p>$ sudo fdisk -l</p></blockquote>

<p>On my system, the device appears as being <em>/dev/sdb</em>, I will therefore use /dev/sdb as a reference for this tutorial, please replace it accordingly to your system (might be sda, sdc &#8230;).<br/>
Once you found your device, you are going to create the partitions.</p>

<p class="warning">
  Using the wrong device name might destroy your system partition, please double check
</p>


<h3>2.2. Making the partitions</h3>

<p>Make sure every of your already mounted partition are unmounted:</p>

<blockquote><p>$sudo umount /dev/sdb1</p></blockquote>

<p>and then launch <strong>fdisk</strong>, a tool to edit partition under linux:</p>

<blockquote><p>sudo fdisk /dev/sdb</p></blockquote>

<p>We are going delete all the partition and then create 2 new partition: one fat partition of 750M which will host the files from the live CD iso, and the rest on another partition.</p>

<p>At fdisk prompt type <em>d x</em> where x is the partition number (you can simply type d if you only have one partition), then:</p>

<ul>
<li><em>n</em> to create a new partition</li>
<li><em>p</em> to make it primary</li>
<li><em>1</em> so it is the first primary partition</li>
<li>Accept the default or type <em>1</em> to start from the first cylinder</li>
<li><em>+750M</em> to make it 750 Meg big</li>
<li><em>a</em> to toggle the partition active for boot</li>
<li><em>1</em> to choose the 1 partition</li>
<li><em>t</em> to change the partition type</li>
<li><em>6</em> to set it to FAT16</li>
</ul>


<p>Now we have out first partition set up, let&#8217;s create the second one:</p>

<ul>
<li><em>n</em> to create yet again a new partition</li>
<li><em>p</em> to make it primary</li>
<li><em>2</em> to be the second partition</li>
<li>Accept the default by typing Enter</li>
<li>Accept the default to make your partition as big as possible</li>
<li>Finally, type <em>w</em> to write the change to your usb pendrive</li>
</ul>


<p>Partitions are now created, let&#8217;s format them.</p>

<h3>2.3. Formatting the partitions</h3>

<p>The first partition is going to be formated as a FAT filesystem of size 16 and we are going to attribute it the label &#8220;liveusb&#8221;.</p>

<blockquote><p>$ sudo mkfs.vfat -F 16 -n liveusb /dev/sdb1</p></blockquote>

<p>The second partition is going to be of type ext2 with a blocksize of 4096 bytes and the label <strong>casper-rw</strong>. Mind that it has to be labeled as <em>casper-rw</em> otherwise the tutorial won&#8217;t work!.</p>

<blockquote><p>$ sudo mkfs.ext2 -b 4096 -L casper-rw /dev/sdb2</p></blockquote>

<p>At this stage, our usb pendrive is ready to host the liveCD image. Now, let&#8217;s copy the files to the usb bar.</p>

<h2>3. Installing Ubuntu on the USB stick</h2>

<h3>3.1. Mounting Ubuntu liveCd image</h3>

<p>In the first place we need to mount our ubuntu iso. Depending if you have the .iso file or the CD, there is 2 different ways of mounting it.</p>

<h4>3.1.1. Mounting from the CD</h4>

<p>People using Ubuntu or any other user-friendly distro, might just have to insert the cd and it will be mounted automatically. If this is not the case:</p>

<blockquote><p>$ sudo mount /media/cdrom</p></blockquote>

<p>should mount it.</p>

<h4>3.1.2. Mounting from an .iso image file</h4>

<p>We will need to create a temporary directory, let say <em>/tmp/ubuntu-livecd</em> and then mount our iso (I will be using a feisty fawn iso).</p>

<blockquote><p>$ mkdir /tmp/ubuntu-livecd<br/>
$ sudo mount -o loop /path/to/feisty-desktop-i386.iso /tmp/ubuntu-livecd</p></blockquote>

<p>Once the cd image is ready, it is time to mount the newly created usb bar partitions:</p>

<h3>3.2. Mounting the usb bar partitions</h3>

<p>Same here, you might be able to get both your partition by simply replugging the usb pendrive, partition might appears as: <em>/media/liveusb</em> and <em>/media/casper-rw</em>. If this is not the case, then you will need to mount them manually:</p>

<blockquote><p>$ mkdir /tmp/liveusb<br/>
$ sudo mount /dev/sdb1 /tmp/liveusb</p></blockquote>

<p>All the partitions we need are now mounted, let&#8217;s copy the files.</p>

<h3>3.3. Copying the files to the usb bar</h3>

<p>Let positionned yourself on the CD image directory (in my case: /tmp/ubuntu-livecd , but it might be /media/cdrom , and copy at the root of your usb first partition:</p>

<ul>
<li>the directories: &#8216;casper&#8217;, &#8216;disctree&#8217;, &#8216;dists&#8217;, &#8216;install&#8217;, &#8216;pics&#8217;, &#8216;pool&#8217;, &#8216;preseed&#8217;, &#8216;.disk&#8217;</li>
<li>The content of directory &#8216;isolinux&#8217;</li>
<li>and files &#8216;md5sum.txt&#8217;, &#8216;README.diskdefines&#8217;, &#8216;ubuntu.ico&#8217;</li>
<li>as well as files: &#8216;casper/vmlinuz&#8217;, &#8216;casper/initrd.gz&#8217; and &#8216;install/mt86plus&#8217;</li>
</ul>


<blockquote><p>$ cd /tmp/ubutu-livecd<br/>
$ sudo cp -rf casper disctree dists install pics pool preseed .disk isolinux/* md5sum.txt README.diskdefines ubuntu.ico casper/vmlinuz casper/initrd.gz install/mt86plus /media/liveusb/</p></blockquote>

<p>It might complain about symbolic links not being able to create, you can ignore this.</p>

<p>Now let&#8217;s go to the first partition of your usb disk and rename <em>isolinux.cfg</em> to <em>syslinux.cfg</em>:</p>

<blockquote><p>$ cd /tmp/liveusb<br/>
$ sudo mv isolinux.cfg syslinux.cfg</p></blockquote>

<p>change /tmp/liveusb according to your settings</p>

<p>Edit syslinux.cfg so it looks like:<br/>
DEFAULT persistent</p>

<p>GFXBOOT bootlogo</p>

<p>GFXBOOT-BACKGROUND 0xB6875A</p>

<p>APPEND file=preseed/ubuntu.seed boot=casper initrd=initrd.gz ramdisk_size=1048576 root=/dev/ram rw quiet splash &#8212;</p>

<p>LABEL persistent</p>

<p>menu label ^Start Ubuntu in persistent mode</p>

<p>kernel vmlinuz</p>

<p>append file=preseed/ubuntu.seed boot=casper persistent initrd=initrd.gz ramdisk_size=1048576 root=/dev/ram rw quiet splash &#8212;</p>

<p>LABEL live</p>

<p>menu label ^Start or install Ubuntu</p>

<p>kernel vmlinuz</p>

<p>append file=preseed/ubuntu.seed boot=casper initrd=initrd.gz ramdisk_size=1048576 root=/dev/ram rw quiet splash &#8212;</p>

<p>LABEL xforcevesa</p>

<p>menu label Start Ubuntu in safe ^graphics mode</p>

<p>kernel vmlinuz</p>

<p>append file=preseed/ubuntu.seed boot=casper xforcevesa initrd=initrd.gz ramdisk_size=1048576 root=/dev/ram rw quiet splash &#8212;</p>

<p>LABEL check</p>

<p>menu label ^Check CD for defects</p>

<p>kernel vmlinuz</p>

<p>append boot=casper integrity-check initrd=initrd.gz ramdisk_size=1048576 root=/dev/ram rw quiet splash &#8212;</p>

<p>LABEL memtest</p>

<p>menu label ^Memory test</p>

<p>kernel mt86plus</p>

<p>append &#8211;</p>

<p>LABEL hd</p>

<p>menu label ^Boot from first hard disk</p>

<p>localboot 0x80</p>

<p>append &#8211;</p>

<p>DISPLAY isolinux.txt</p>

<p>TIMEOUT 300</p>

<p>PROMPT 1</p>

<p>F1 f1.txt</p>

<p>F2 f2.txt</p>

<p>F3 f3.txt</p>

<p>F4 f4.txt</p>

<p>F5 f5.txt</p>

<p>F6 f6.txt</p>

<p>F7 f7.txt</p>

<p>F8 f8.txt</p>

<p>F9 f9.txt</p>

<p>F0 f10.txt<br/>
Woof, finally we have our usb disk almost usuable. We have a last thing to do: make the usb bootable.</p>

<h3>3.4. Making the usb bar bootable.</h3>

<p>in order to make our usb disk bootable, we need to install <em>syslinux</em> and <em>mtools</em>:</p>

<p class="shell">
  $ sudo apt-get install syslinux mtools
</p>


<p>And finally unmount /dev/sdb1 and make it bootable:</p>

<blockquote><p>$ cd<br/>
$ sudo umount /tmp/liveusb<br/>
$ sudo syslinux -f /dev/sdb1</p></blockquote>

<p>Here we are, reboot, set your BIOS to boot from the usb bar and enjoy Ubuntu linux from a pendrive</p>

<h2>4. Troubleshooting</h2>

<p>If you are having trouble booting on the usb bar, this might be due to your MBR being corrupted. In order to fix it up, you can use lilo (I installed lilo on my box only for thid purpose).</p>

<blockquote><p>$ lilo -M /dev/sdb</p>

<p>will fix the MBR on device /dev/sdb</p></blockquote>

<p><a href="http://www.debuntu.org/how-to-install-ubuntu-linux-on-usb-bar">http://www.debuntu.org/how-to-install-ubuntu-linux-on-usb-bar </a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Noppanit Charassinvichai</span></span>

      




<time class='entry-date' datetime='2007-03-29T00:00:00-04:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2007</span></span> <span class='time'>12:00 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/knowledges/'>knowledges</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://noppanit.github.io/howto-install-ubuntu-linux-on-a-usb-pendrive/" data-via="noppanit" data-counturl="http://noppanit.github.io/howto-install-ubuntu-linux-on-a-usb-pendrive/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/tutorial-how-to-set-performance-options-in-windows-xp/" title="Previous Post: Tutorial : How to set performance options in Windows XP">&laquo; Tutorial : How to set performance options in Windows XP</a>
      
      
        <a class="basic-alignment right" href="/tutorial-c-with-directives-statement/" title="Next Post: Tutorial : C# with directives statement">Tutorial : C# with directives statement &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/code-review-with-the-world/">Code Review With the World</a>
      </li>
    
      <li class="post">
        <a href="/maps-all-parking-signs-in-nyc/">Maps All Parking Signs in NYC.</a>
      </li>
    
      <li class="post">
        <a href="/im-never-going-back-to-modern-editor-again/">I&#8217;m Never Going Back to Modern Editor Again.</a>
      </li>
    
      <li class="post">
        <a href="/how-to-start-doing-tdd-for-jquery-plugin/">How to Start Doing TDD for jQuery Plugin.</a>
      </li>
    
      <li class="post">
        <a href="/the-most-basic-example-of-linear-regression/">The Most Basic Example of Linear Regression</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/noppanit">@noppanit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'noppanit',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Noppanit Charassinvichai -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'noppanit';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
