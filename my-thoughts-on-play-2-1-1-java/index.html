
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>My thoughts on Play 2.1.1 (Java) - My Blog</title>
	<meta name="author" content="Noppanit Charassinvichai">

	
	<meta name="description" content="I have just rolled off from a project using AngularJS and Play 2.1.1. It was a mobile website, I wish I could include the site here as well but it&# &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
	<link rel="canonical" href=" https://www.noppanit.com/my-thoughts-on-play-2-1-1-java/" />
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">My Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.noppanit.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/noppanit" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/noppanit" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.noppanit.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">My Thoughts on Play 2.1.1 (Java)</h2>
	<div class="entry-content"><p>I have just rolled off from a project using AngularJS and Play 2.1.1. It was a mobile website, I wish I could include the site here as well but it&#8217;s still in development. We are using Play! 2.1.1 Java and AngularJs to build a mobile website. So, I&#8217;d like to summarise my thoughts here.</p>

<h1>Play Framework 2.1.1</h1>

<p>It&#8217;s a really good framework if you want to start something quickly. It&#8217;s like Rail in Java. You have everything in this framework, ORM, LESS, RequireJS and also some caching strategy. If in the future, I have a requirement to create a prototype in Java I would choose this framework for sure (Who would create a prototype in Java anyways), buy hey! it can be that who knows. By the way, there are some downsides. As Play considers everything in static. That makes testing quite tricky. For example, every controller is statically created, if you want to have something injected to your controller you have to create a custom global configuration for Play!. Here&#8217;s the example.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Global object class
</span><span class='line'># ~~~~~
</span><span class='line'># Define the Global object class for this application.
</span><span class='line'># Default to Global in the root package.
</span><span class='line'>application.global=global.CustomGlobal</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">global</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// CAUTION: this class name must be specified in application.conf</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomGlobal</span> <span class="kd">extends</span> <span class="n">GlobalSettings</span> <span class="o">{</span>
</span><span class='line'>   <span class="kd">private</span> <span class="kd">static</span> <span class="n">MutablePicoContainer</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="n">wireUpDependencies</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>   <span class="kd">private</span> <span class="kd">static</span> <span class="n">MutablePicoContainer</span> <span class="nf">wireUpDependencies</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>         <span class="n">MutablePicoContainer</span> <span class="n">container</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">DefaultPicoContainer</span><span class="o">();</span>
</span><span class='line'>         <span class="c1">// Do some injections.</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>   <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">A</span> <span class="nf">getControllerInstance</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">aControllerClass</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">dependencies</span><span class="o">.</span><span class="na">getComponent</span><span class="o">(</span><span class="n">aControllerClass</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then in <strong>/routes</strong> you can use <strong>@</strong> to say not create a controller statically.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">GET</span>     <span class="o">/</span>                               <span class="nd">@controllers.coop.main.Application.index</span><span class="o">(</span><span class="n">any</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Other thing is EBean which comes with Play!. EBean is built on top of JPA. However, this means you have to learn a new framework if you know Hibernate already. They are quite close. Other than that, I think Play! is great. If you have time you might want to have a look at <a href="http://dropwizard.codahale.com/" title="DropWizard">DropWizard</a> if you just want to create a RESTFul service or <a href="http://www.sparkjava.com/download.html" title="SPARK">SPARK</a> for a sinatra-like java framework.</p>

<h2>EBean Query tuning</h2>

<p>EBean is like another version of Hibernate. It&#8217;s basically an ORM framework. There&#8217;s a catch in EBean if you turn the showing query on and if you join two or three tables and you use RawSql EBean will fire a lot of query to fetch each and every row you want to use. You will see a massive log. That hurts the performance. If you could use basic EBean for example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span> <span class="n">orders</span> <span class="o">=</span>
</span><span class='line'>    <span class="n">Ebean</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Order</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class='line'>        <span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="s">&quot;customer&quot;</span><span class="o">)</span>
</span><span class='line'>        <span class="o">.</span><span class="na">findList</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you use .fetch(&#8220;customer&#8221;) it will just fire one query. So be careful. If you see a performance hit in your app and if it&#8217;s because of database. Check this <a href="http://www.avaje.org/ebean/introquery_joinquery.html" title="EBean join query.">link</a>. So, keep an eye on your performance because the peak might be on your query.</p>

<h2>Conclusion</h2>

<p>Play! is a good framework for doing something really quick and you don&#8217;t want to get your hands dirty with Spring or pure Java servlet. My biggest catch for Play! for me is the ability to write tests and to inject something to a controller. That means it&#8217;s hard to write unit-test but you can still write integration tests. If you&#8217;re ok with this fact I guess Play! is a good framework to look out for.</p>

<p>Also, Play! documentation is quite incomplete. And every version is really different than the prior version. So, please be careful to choose the write version of your documentation otherwise you might be scratching your head for a long time until you figure it out you&#8217;re looking at the wrong documentation.</p>
</div>


<div class="meta">
	<div class="date">




Jul 1st, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Noppanit Charassinvichai

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'noppanit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://www.noppanit.com/my-thoughts-on-play-2-1-1-java/';
        var disqus_url = 'https://www.noppanit.com/my-thoughts-on-play-2-1-1-java/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-11403715-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>