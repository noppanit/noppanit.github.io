<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Octopress on crack</title>
  <meta name="description" content="I believe you will find a ton of blogs writing about makeing Octopress faster. I believe nearly everyone who migrated their blog to Octopress, the first post...">

  
  
  <link rel="stylesheet" href="http://localhost:4000/assets/style.css">

  <link rel="canonical" href="http://localhost:4000/octopress-on-crack.html">
  <link rel="alternate" type="application/rss+xml" title="Noppanit" href="http://localhost:4000/feed.xml">

  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>

  
  <!-- font-smoothing is only applied on dark themes -->
  <body class="font-smoothing">

    <header class="px-2 clearfix">
  <!-- <div class="left-lg absolute-lg left-0 top-0 sm-width-full mt-2">
    <a class="no-underline-hover px-1" href="/">
      <span class="inline-block h4 hide-sm ml-2">&#x261c;</span>
    </a>
    <a class="italic no-underline" href="/">
       home
    </a>
  </div> -->
  <div class="right-lg absolute-lg right-0 top-0">
    <ul class="mt-1 mt-lg-2 mr-2 mr-lg-3">
      <li class="inline-block block-lg text-right ml-1 ml-lg-0">
        <a class="italic h4 bold no-underline" href="/">
          <!-- Noppanit -->
          Home
        </a>
      </li>
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</header>


    <div>
      <article class="container mx-auto px-2" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="mt-4 mb-2 clearfix header-text">
    <h1 class="h0 inline-block py-2 mt-4 header-title">Octopress on crack</h1>
    <div class="clearfix mb-4 py-1">
      <p class="h4 lh-condensed"><time datetime="2015-10-07T22:44:22-04:00" itemprop="datePublished">Oct 7, 2015</time></p>
      <div class="col-1 sm-width-full border-top-thick">
      </div>
    </div>
  </div>

  <div class="prose py-4" itemprop="articleBody">
      <p>I believe you will find a ton of blogs writing about makeing Octopress faster. I believe nearly everyone who migrated their blog to Octopress, the first post would be the migration and the next would be performance tuning. I want to be the cool kid so here you go.</p>

<p>Once you got out of WordPress now there’s much more you can do about your performance. But before you start, nothing can be done before you have the baseline numbers</p>

<h2 id="before">Before</h2>

<p>Here’s my before performance from Google PageSpeed.</p>

<p><img src="/wp-content/uploads/2015/10/google-pagespeed-before.jpg" alt="Google PageSpeed before performance" /></p>

<p>And from webpagetest.org</p>

<p><img src="/wp-content/uploads/2015/10/before-perf-noppanit-com.jpg" alt="Webpagetest before performance" /></p>

<p>In a nutshell, my page starts to render in <em>2.4s</em> and finishes in <em>4s</em>. Yikes! I wouldn’t even want to wait for my site to load. Let’s see where’s the lowest hanging fruit.</p>

<h2 id="what-about-images">What about images?</h2>

<p>A picture is worth a thousand words. Who doesn’t like image right? Also, I tend to have a lot of screenshots and they’re all PNGs. And they tend to be big. As they’re all screenshots so I don’t really care about losing some of the quality so I convert them to be jpg. If you’re using OSX, there’s a command that you can run.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sips -s format jpeg your_png.png --out your_pic.jpg
</code></pre></div></div>

<p>Now what can we do to reduce the size? There’s lots of tools out there that you can just throw your image in and it will compress the image for you. I use <a href="https://compressor.io/">compressor.io</a>. It’s really good. Just try throwing your image in there and see what happens. Compressor.io can reduce my images up to 60% and that saves a lot of bandwidth.</p>

<h2 id="minify-cssjs">Minify CSS/JS</h2>

<p>Fortunetely, I use <a href="https://www.cloudflare.com/">Cloudflare</a> and they have the feature to minify that for you. So, I just flipped the switch and it works like magic.</p>

<h2 id="browser-caching">Browser caching</h2>

<p>Going back to what Google PageSpeed tells us again. It complaints about <em>Leverage browser caching</em>. I’m lucky again because in Cloudflare you can set the cache to be 30 days and that seems to be ok for Google.</p>

<h2 id="inline-css">Inline CSS</h2>

<p>I use <a href="https://github.com/tommy351/Octopress-Theme-Slash">Slash</a> theme and when I look at the CSS, it’s only 22K. So why not just inline it and save one more request for the browser. So, in <em>_includes/head.html</em> you can change the line that includes your stylesheet to be.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">html</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">&lt;style&gt;
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">		&#x7b;\% include screen.css %&#x7d; # delete '\' in front of % before you paste this snippet
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">	&lt;/style&gt;</div></div></pre></div></figure>

<p>This might be different from theme to theme but it shouldn’t be difficult to find that out.</p>

<h2 id="after">After</h2>

<p>Now, let’s have a quick look at the after performance.</p>

<p>Here’s my after performance from Google PageSpeed.</p>

<p><img src="/wp-content/uploads/2015/10/google-pagespeed-after.jpg" alt="Google PageSpeed after" /></p>

<p>It’s a lot better now but there’s one tiny problem with mobile which I’ll write another blog post about that.</p>

<p>Let’s have a look at webpagetest now.</p>

<p><img src="/wp-content/uploads/2015/10/webpagetest-after.jpg" alt="Webpagetest After" /></p>

<p>A lot better! It’s still not the best but now my page loads within <em>0.5s</em> and finishes in <em>1.9s</em>. However, there’s still a lot to work on mobile.</p>

<p>I could shead about 200ms by not using SSL but I’m willing to compromise that with a little bit of security.</p>

<h2 id="whats-next">What’s next</h2>

<p>I’d like to try hosting the images on S3 to see if that would speed up the load time. And I want to make the images responsive for mobile.</p>


  </div>
</article>

<div class="container mx-auto px-2 py-2 clearfix">
  <!-- Use if you want to show previous and next for all posts. -->



  <div class="col-4 sm-width-full left mr-lg-4 mt-3">
    <a class="no-underline-hover py-1 block" href="http://localhost:4000/migrated-from-wordpress-to-octopress">
      <span class="h5 bold">Previous</span>
      <p class="bold h3 link-primary mb-1">Migrated from WordPress to Octopress</p>
      <p>I have heard so much about Octopress but I haven’t got the time to actually get to know what it...</p>
    </a>
  </div>
  
  
  <div class="col-4 sm-width-full left mt-3">
    <a class="no-underline-hover py-1 block" href="http://localhost:4000/why-algorithm-matters.html">
      <span class="h5 bold">Next</span>
      <p class="bold h3 link-primary mb-1">Why algorithm matters?</p>
      <p>If you have been to one of those technical interviews, you will like this. Google: 90% of our engineers use...</p>
    </a>
  </div>


</div>

    </div>

    <div class="container mx-auto clearfix mt-2 mt-lg-4 px-2">
  <div class="border-top-thick">
    <p class="col-8 sm-width-full left py-2 mb-0">This project is maintained by <a class="text-accent" href="https://github.com/noppanit">noppanit</a></p>
    <ul class="list-reset right clearfix sm-width-full py-2 mb-2 mb-lg-0">
      <li class="inline-block mr-1">
        <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="Noppanit">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </li>
      <li class="inline-block">
        <a class="github-button" href="https://github.com/noppanit/" data-icon="octicon-star" data-count-href="noppanit//stargazers" data-count-api="/repos/noppanit/#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star noppanit/ on GitHub">Star</a>
      </li>
    </ul>
  </div>
</div>


  </body>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</html>