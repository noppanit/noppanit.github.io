
<!doctype>
<html lang="en">
  <head>
    <meta content='My thoughts on Play 2.1.1 (Java) - Noppanit' name='title' />
    <meta content='My thoughts on Play 2.1.1 (Java) - Noppanit' name='og:title' />
    <title>My thoughts on Play 2.1.1 (Java) - Noppanit</title>
    <link href='http://localhost:4000/images/fav.png' rel='shortcut icon'>
<link href='http://localhost:4000/stylesheets/style.css' rel='stylesheet' type='text/css' />
<link href='http://localhost:4000/stylesheets/syntax.css' rel='stylesheet' type='text/css' />

<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <meta content='http://localhost:4000/posts/my-thoughts-on-play-2-1-1-java' property='og:url' />
  <meta content="I have just rolled off from a project using AngularJS and Play 2.1.1. It was a mobile website, I wish I could include..." property='og:description' />
  <meta content="article" property="og:type" />

<!-- - -->





  </head>
  <body class="lh-copy dark-gray pa0 f6 sans-serif bg-super-white">
    <header class="tc mt4">
      <a href="http://localhost:4000">
        <img src="http://localhost:4000/images/scribble.png" alt="Home" width="53" height="59">
      </a>
      <p>Noppanit</p>
    </header>
    <div class="mw7 bg-white mt4 mb3 center br2-ns bt bb ba-ns b--light-gray">
      <nav class="bb b--light-gray pv4 tc" aria-label="Main">
        
      </nav>

      <main class="tl f6 relative pa4 pa5-ns overflow-hidden">
        
          <div class="mb4">
            <div class="fw600 light-silver mt1">01 Jul 2013</div>
            <h1 class="ttu f3 mt0 lh-title cb mb2">
              
              My thoughts on Play 2.1.1 (Java)
            </h1>
            
          </div>
        
        <div class="markdown-body">
          <p>I have just rolled off from a project using AngularJS and Play 2.1.1. It was a mobile website, I wish I could include the site here as well but it’s still in development. We are using Play! 2.1.1 Java and AngularJs to build a mobile website. So, I’d like to summarise my thoughts here.</p>

<h1 id="play-framework-211">Play Framework 2.1.1</h1>

<p>It’s a really good framework if you want to start something quickly. It’s like Rail in Java. You have everything in this framework, ORM, LESS, RequireJS and also some caching strategy. If in the future, I have a requirement to create a prototype in Java I would choose this framework for sure (Who would create a prototype in Java anyways), buy hey! it can be that who knows. By the way, there are some downsides. As Play considers everything in static. That makes testing quite tricky. For example, every controller is statically created, if you want to have something injected to your controller you have to create a custom global configuration for Play!. Here’s the example.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Global object class
# ~~~~~
# Define the Global object class for this application.
# Default to Global in the root package.
application.global=global.CustomGlobal
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">global</span><span class="o">;</span>

<span class="c1">// CAUTION: this class name must be specified in application.conf</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomGlobal</span> <span class="kd">extends</span> <span class="n">GlobalSettings</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="kd">static</span> <span class="n">MutablePicoContainer</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="n">wireUpDependencies</span><span class="o">();</span>

   <span class="kd">private</span> <span class="kd">static</span> <span class="n">MutablePicoContainer</span> <span class="nf">wireUpDependencies</span><span class="o">()</span> <span class="o">{</span>
         <span class="n">MutablePicoContainer</span> <span class="n">container</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultPicoContainer</span><span class="o">();</span>
         <span class="c1">// Do some injections.</span>
   <span class="o">}</span>
   <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">A</span> <span class="nf">getControllerInstance</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">aControllerClass</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">dependencies</span><span class="o">.</span><span class="na">getComponent</span><span class="o">(</span><span class="n">aControllerClass</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Then in <strong>/routes</strong> you can use <strong>@</strong> to say not create a controller statically.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET     /                               @controllers.coop.main.Application.index(any = "none")
</code></pre></div></div>

<p>Other thing is EBean which comes with Play!. EBean is built on top of JPA. However, this means you have to learn a new framework if you know Hibernate already. They are quite close. Other than that, I think Play! is great. If you have time you might want to have a look at <a href="http://dropwizard.codahale.com/" title="DropWizard">DropWizard</a> if you just want to create a RESTFul service or <a href="http://www.sparkjava.com/download.html" title="SPARK">SPARK</a> for a sinatra-like java framework.</p>

<h2 id="ebean-query-tuning">EBean Query tuning</h2>

<p>EBean is like another version of Hibernate. It’s basically an ORM framework. There’s a catch in EBean if you turn the showing query on and if you join two or three tables and you use RawSql EBean will fire a lot of query to fetch each and every row you want to use. You will see a massive log. That hurts the performance. If you could use basic EBean for example.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Order</span><span class="o">&gt;</span> <span class="n">orders</span> <span class="o">=</span>   
    <span class="n">Ebean</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Order</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>  
        <span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="s">"customer"</span><span class="o">)</span>  
        <span class="o">.</span><span class="na">findList</span><span class="o">();</span>
</code></pre></div></div>

<p>If you use .fetch(“customer”) it will just fire one query. So be careful. If you see a performance hit in your app and if it’s because of database. Check this <a href="http://www.avaje.org/ebean/introquery_joinquery.html" title="EBean join query.">link</a>. So, keep an eye on your performance because the peak might be on your query.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Play! is a good framework for doing something really quick and you don’t want to get your hands dirty with Spring or pure Java servlet. My biggest catch for Play! for me is the ability to write tests and to inject something to a controller. That means it’s hard to write unit-test but you can still write integration tests. If you’re ok with this fact I guess Play! is a good framework to look out for.</p>

<p>Also, Play! documentation is quite incomplete. And every version is really different than the prior version. So, please be careful to choose the write version of your documentation otherwise you might be scratching your head for a long time until you figure it out you’re looking at the wrong documentation.</p>


        </div>
        <p class="mt4">
  Til next time,<br>
  noppanit
  <span class="silver">at 00:00</span>
</p>
<img src="http://localhost:4000/images/scribble3.png" alt="scribble" />

      </main>
      <section class="fixed-l mw7 center w-100 top-50 tc pb4 nt4">
  
    <a href="http://localhost:4000/posts/angularjs-cookies-with-play-framework-2-1-1-java-session" class="no-underline f1 light-blue hover-silver nl5 fl-l ph3">‹</a>
  
  
    <a href="http://localhost:4000/posts/my-thoughts-on-angularjs" class="no-underline f1 light-blue hover-silver nr5 fr-l ph3">›</a>
  
</section>
    </div>
    <footer class="mw7 center tc pt3 pb4 silver">
      Built with Jekyll using <a href="http://github.com/muan/scribble" class="link silver hover-blue pv1">Scribble</a>.
      <img src="http://localhost:4000/images/scribble2.png" alt="scribble" class="mt4 db center" />
    </footer>
  </body>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</html>
