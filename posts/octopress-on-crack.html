
<!doctype>
<html lang="en">
  <head>
    <meta content='Octopress on crack - Noppanit' name='title' />
    <meta content='Octopress on crack - Noppanit' name='og:title' />
    <title>Octopress on crack - Noppanit</title>
    <link href='http://localhost:4000/images/fav.png' rel='shortcut icon'>
<link href='http://localhost:4000/stylesheets/style.css' rel='stylesheet' type='text/css' />
<link href='http://localhost:4000/stylesheets/syntax.css' rel='stylesheet' type='text/css' />

<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <meta content='http://localhost:4000/posts/octopress-on-crack' property='og:url' />
  <meta content="I believe you will find a ton of blogs writing about makeing Octopress faster. I believe nearly everyone who migrated..." property='og:description' />
  <meta content="article" property="og:type" />

<!-- - -->





  </head>
  <body class="lh-copy dark-gray pa0 f6 sans-serif bg-super-white">
    <header class="tc mt4">
      <a href="http://localhost:4000">
        <img src="http://localhost:4000/images/scribble.png" alt="Home" width="53" height="59">
      </a>
      <p>Noppanit</p>
    </header>
    <div class="mw7 bg-white mt4 mb3 center br2-ns bt bb ba-ns b--light-gray">
      <nav class="bb b--light-gray pv4 tc" aria-label="Main">
        
      </nav>

      <main class="tl f6 relative pa4 pa5-ns overflow-hidden">
        
          <div class="mb4">
            <div class="fw600 light-silver mt1">07 Oct 2015</div>
            <h1 class="ttu f3 mt0 lh-title cb mb2">
              
              Octopress on crack
            </h1>
            
          </div>
        
        <div class="markdown-body">
          <p>I believe you will find a ton of blogs writing about makeing Octopress faster. I believe nearly everyone who migrated their blog to Octopress, the first post would be the migration and the next would be performance tuning. I want to be the cool kid so here you go.</p>

<p>Once you got out of WordPress now there’s much more you can do about your performance. But before you start, nothing can be done before you have the baseline numbers</p>

<h2 id="before">Before</h2>

<p>Here’s my before performance from Google PageSpeed.</p>

<p><img src="/wp-content/uploads/2015/10/google-pagespeed-before.jpg" alt="Google PageSpeed before performance" /></p>

<p>And from webpagetest.org</p>

<p><img src="/wp-content/uploads/2015/10/before-perf-noppanit-com.jpg" alt="Webpagetest before performance" /></p>

<p>In a nutshell, my page starts to render in <em>2.4s</em> and finishes in <em>4s</em>. Yikes! I wouldn’t even want to wait for my site to load. Let’s see where’s the lowest hanging fruit.</p>

<h2 id="what-about-images">What about images?</h2>

<p>A picture is worth a thousand words. Who doesn’t like image right? Also, I tend to have a lot of screenshots and they’re all PNGs. And they tend to be big. As they’re all screenshots so I don’t really care about losing some of the quality so I convert them to be jpg. If you’re using OSX, there’s a command that you can run.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sips -s format jpeg your_png.png --out your_pic.jpg
</code></pre></div></div>

<p>Now what can we do to reduce the size? There’s lots of tools out there that you can just throw your image in and it will compress the image for you. I use <a href="https://compressor.io/">compressor.io</a>. It’s really good. Just try throwing your image in there and see what happens. Compressor.io can reduce my images up to 60% and that saves a lot of bandwidth.</p>

<h2 id="minify-cssjs">Minify CSS/JS</h2>

<p>Fortunetely, I use <a href="https://www.cloudflare.com/">Cloudflare</a> and they have the feature to minify that for you. So, I just flipped the switch and it works like magic.</p>

<h2 id="browser-caching">Browser caching</h2>

<p>Going back to what Google PageSpeed tells us again. It complaints about <em>Leverage browser caching</em>. I’m lucky again because in Cloudflare you can set the cache to be 30 days and that seems to be ok for Google.</p>

<h2 id="inline-css">Inline CSS</h2>

<p>I use <a href="https://github.com/tommy351/Octopress-Theme-Slash">Slash</a> theme and when I look at the CSS, it’s only 22K. So why not just inline it and save one more request for the browser. So, in <em>_includes/head.html</em> you can change the line that includes your stylesheet to be.</p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">html</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line">&lt;style&gt;
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">		&#x7b;\% include screen.css %&#x7d; # delete '\' in front of % before you paste this snippet
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">	&lt;/style&gt;</div></div></pre></div></figure>

<p>This might be different from theme to theme but it shouldn’t be difficult to find that out.</p>

<h2 id="after">After</h2>

<p>Now, let’s have a quick look at the after performance.</p>

<p>Here’s my after performance from Google PageSpeed.</p>

<p><img src="/wp-content/uploads/2015/10/google-pagespeed-after.jpg" alt="Google PageSpeed after" /></p>

<p>It’s a lot better now but there’s one tiny problem with mobile which I’ll write another blog post about that.</p>

<p>Let’s have a look at webpagetest now.</p>

<p><img src="/wp-content/uploads/2015/10/webpagetest-after.jpg" alt="Webpagetest After" /></p>

<p>A lot better! It’s still not the best but now my page loads within <em>0.5s</em> and finishes in <em>1.9s</em>. However, there’s still a lot to work on mobile.</p>

<p>I could shead about 200ms by not using SSL but I’m willing to compromise that with a little bit of security.</p>

<h2 id="whats-next">What’s next</h2>

<p>I’d like to try hosting the images on S3 to see if that would speed up the load time. And I want to make the images responsive for mobile.</p>


        </div>
        <p class="mt4">
  Til next time,<br>
  noppanit
  <span class="silver">at 22:44</span>
</p>
<img src="http://localhost:4000/images/scribble3.png" alt="scribble" />

      </main>
      <section class="fixed-l mw7 center w-100 top-50 tc pb4 nt4">
  
    <a href="http://localhost:4000/posts/migrated-from-wordpress-to-octopress" class="no-underline f1 light-blue hover-silver nl5 fl-l ph3">‹</a>
  
  
    <a href="http://localhost:4000/posts/why-algorithm-matters" class="no-underline f1 light-blue hover-silver nr5 fr-l ph3">›</a>
  
</section>
    </div>
    <footer class="mw7 center tc pt3 pb4 silver">
      Built with Jekyll using <a href="http://github.com/muan/scribble" class="link silver hover-blue pv1">Scribble</a>.
      <img src="http://localhost:4000/images/scribble2.png" alt="scribble" class="mt4 db center" />
    </footer>
  </body>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</html>
