
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>My Blog</title>
	<meta name="author" content="Noppanit Charassinvichai">

	
	<meta name="description" content="I think everybody knows Twitter, if you haven&#8217;t used it. I&#8217;m pretty sure that you might have heard of it at some point. So, briefly it&# &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
	<link rel="canonical" href=" https://www.noppanit.com/posts/6/index.html" />
	<link href="/favicon.png" rel="shortcut icon">
	<style>
		@font-face{font-family:'FontAwesome';src:url("/font/fontawesome-webfont.eot");src:url("/font/fontawesome-webfont.eot?#iefix") format("embedded-opentype"),url("/font/fontawesome-webfont.woff") format("woff"),url("/font/fontawesome-webfont.ttf") format("truetype"),url("/font/fontawesome-webfont.svgz#FontAwesomeRegular") format("svg"),url("/font/fontawesome-webfont.svg#FontAwesomeRegular") format("svg");font-weight:normal;font-style:normal}*{margin:0;padding:0}body{font-family:"HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;font-size:14px;background:#eee;color:#666}@media screen and (max-width: 1040px){body{margin:0 20px}}@media screen and (max-width: 600px){body{font-size:13px}}h1{font-size:1.8em}h2{font-size:1.5em}h3{font-size:1.3em}a{text-decoration:none;outline-width:0;color:#258fb8}.alignleft{float:left}.alignright{float:right}.clearfix{*zoom:1}.clearfix:after{content:"";display:table;clear:both}.inner{width:1000px;margin:0 auto}@media screen and (max-width: 1040px){.inner{width:100%}}.pullquote-right:before,.pullquote-left:before{padding:0;border:none;content:attr(data-pullquote);float:right;width:45%;margin:.5em 0 1em 1.5em;position:relative;top:7px;font-size:1.4em;line-height:1.45em}.pullquote-left:before{float:left;margin:.5em 1.5em 1em 0}#header{height:30px;padding:30px 0;border-bottom:1px solid #ddd;line-height:30px}@media screen and (max-width: 1040px){#header{height:auto;position:relative;padding-bottom:10px}}#header a{color:#666;-moz-transition:color 0.3s;-o-transition:color 0.3s;-webkit-transition:color 0.3s;transition:color 0.3s}#header a:hover{color:#258fb8}#header h1{float:left;font-weight:300;font-size:30px}@media screen and (max-width: 1040px){#header h1{float:none}}#main-nav{float:left;margin-left:30px}@media screen and (max-width: 1040px){#main-nav{float:none;margin-left:0;margin-top:15px}}@media screen and (max-width: 600px){#main-nav>ul{display:none}}#main-nav>ul>li{margin-left:50px;display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline}@media screen and (max-width: 1040px){#main-nav>ul>li{margin-left:0;margin-right:50px}#main-nav>ul>li:last-of-type{margin-right:0}}#main-nav>ul>li:hover>a{color:#258fb8}#main-nav>ul>li>a{padding:38px 0;margin-top:-38px}#main-nav>ul>li>a:after{content:"\f078";color:#ccc;font:12px FontAwesome;padding-left:10px}#main-nav>ul>li>a:only-child:after{content:""}@media screen and (max-width: 1040px){#main-nav>ul>li>a{padding:18px 0}}#main-nav>ul ul{position:absolute;top:60px;left:-15px;z-index:10;white-space:nowrap;background:#ddd;border:1px solid #ccc;list-style:none;display:none;-moz-box-shadow:0 4px 8px rgba(0,0,0,0.1);-webkit-box-shadow:0 4px 8px rgba(0,0,0,0.1);box-shadow:0 4px 8px rgba(0,0,0,0.1);-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}@media screen and (max-width: 1040px){#main-nav>ul ul{top:40px}}#main-nav>ul ul ul{-moz-border-radius:0 5px 5px 5px;-webkit-border-radius:0;border-radius:0 5px 5px 5px}#main-nav>ul ul li{border-top:1px solid #eee;border-bottom:1px solid #ccc}#main-nav>ul ul li:hover{background:#d5d5d5}#main-nav>ul ul li:first-of-type{border-top:none}#main-nav>ul ul li:first-of-type ul{-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}#main-nav>ul ul li:last-of-type{border-bottom:none}#main-nav>ul ul li>a{display:block;padding:5px 15px}#main-nav>ul ul li>a:after{content:"\f054";color:#999;font:12px FontAwesome;padding-left:10px}#main-nav>ul ul li>a:hover{color:#666}#main-nav>ul ul li>a:only-child:after{content:""}#main-nav>ul ul ul{top:0;left:100%}#main-nav>ul li{position:relative}#main-nav>ul li:hover>ul{display:block}#main-nav select{display:none;margin-bottom:10px}@media screen and (max-width: 600px){#main-nav select{display:block}}#mobile-nav{display:none;height:37px;position:relative}@media screen and (max-width: 600px){#mobile-nav{display:block}}#mobile-nav a{display:block}#mobile-nav .button{cursor:pointer}#mobile-nav .container{display:none}#mobile-nav .menu{position:relative;width:100%}#mobile-nav .menu .button{background:#f2f2f2;border:1px solid #ddd;color:#999;padding:0 60px 0 10px;position:relative;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}#mobile-nav .menu .button:hover{color:#999}#mobile-nav .menu .button.on{color:#666;-moz-border-radius:5px 5px 5px 0;-webkit-border-radius:5px;border-radius:5px 5px 5px 0}#mobile-nav .menu .button.on:before{content:"\f077"}#mobile-nav .menu .button:before{content:"\f078";color:#ddd;font:16px FontAwesome;line-height:30px;position:absolute;top:0;right:40px}#mobile-nav .menu .container{background:#f2f2f2;border:1px solid #ddd;border-top:none;position:absolute;top:31px;z-index:1;-moz-border-radius:0 0 5px 5px;-webkit-border-radius:0;border-radius:0 0 5px 5px}#mobile-nav .menu .container ul{list-style:none}#mobile-nav .menu .container ul ul{margin-left:20px}#mobile-nav .menu .container a{padding:0 10px}#mobile-nav .search{position:absolute;top:0;right:0}#mobile-nav .search .button{background:#ddd;width:30px;height:30px;position:absolute;top:1px;right:-1px;-moz-border-radius:0 5px 5px 0;-webkit-border-radius:0;border-radius:0 5px 5px 0}#mobile-nav .search .button:before{content:"\f002";color:#f2f2f2;font:20px FontAwesome;line-height:30px;position:absolute;top:0;left:7px}#mobile-nav .search .button.on{background:#ccc}#mobile-nav .search .button.on:before{content:"\f00d"}#mobile-nav .search .container{position:absolute;right:51px;z-index:1}#mobile-nav .search input[type="text"]{background:#fff;border:1px solid #ddd;border-right:none;color:#999;font:13px "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;height:30px;width:100%;padding:0 10px;-moz-border-radius:5px 0 0 5px;-webkit-border-radius:5px;border-radius:5px 0 0 5px}@media screen and (max-width: 1040px){#sub-nav{position:absolute;top:30px;right:0}}@media screen and (max-width: 600px){#sub-nav{display:none}}#sub-nav .search{float:left;margin-top:1px;position:relative}@media screen and (max-width: 1040px){#sub-nav .search{float:none;margin-top:15px}}#sub-nav .search:before{content:"\f002";color:#ccc;font:18px FontAwesome;line-height:30px;position:absolute;top:0;right:125px}#sub-nav .search input[type="text"]{background:#f2f2f2;color:#999;border:1px solid #ddd;font:13px "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;padding:6px 15px 6px 35px;width:100px;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s;-moz-border-radius:15px;-webkit-border-radius:15px;border-radius:15px}#sub-nav .search input[type="text"]:focus,#sub-nav .search input[type="text"]:active{background:#fff;border-top:1px solid #ccc;color:#666;outline:none}#sub-nav .social{float:left;margin-right:15px}@media screen and (max-width: 1040px){#sub-nav .social{float:none;margin-right:0}#sub-nav .social a:last-of-type{margin-right:0}}#sub-nav .social a{-moz-border-radius:50%;-webkit-border-radius:50%;border-radius:50%;display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;text-indent:-9999px;margin-right:15px;opacity:0.5;width:28px;height:28px;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}#sub-nav .social a:hover{opacity:1}#sub-nav .social a.facebook{background:url('/images/social/facebook.png?1443976015') center no-repeat #3B5998;border:1px solid #3B5998}#sub-nav .social a.facebook:hover{border:1px solid #2d4373}#sub-nav .social a.google{background:url('/images/social/google.png?1443976015') center no-repeat #C83D20;border:1px solid #C83D20}#sub-nav .social a.google:hover{border:1px solid #9c3019}#sub-nav .social a.twitter{background:url('/images/social/twitter.png?1443976015') center no-repeat #55CFF8;border:1px solid #55CFF8}#sub-nav .social a.twitter:hover{border:1px solid #24c1f6}#sub-nav .social a.github{background:url('/images/social/github.png?1443976015') center no-repeat #afb6ca;border:1px solid #afb6ca}#sub-nav .social a.github:hover{border:1px solid #909ab6}#sub-nav .social a.coderwall{background:url('/images/social/coderwall.png?1443976015') center no-repeat #3a729f;border:1px solid #3a729f}#sub-nav .social a.coderwall:hover{border:1px solid #2c577a}#sub-nav .social a.pinboard{background:url('/images/social/pinboard.png?1443976015') center no-repeat #0066c8;border:1px solid #3a729f}#sub-nav .social a.pinboard:hover{border:1px solid #0052cc}#sub-nav .social a.linkedin{background:url('/images/social/linkedin.png?1443976015') center no-repeat #005A87;border:1px solid #005A87}#sub-nav .social a.linkedin:hover{border:1px solid #003854}#sub-nav .social a.pinterest{background:url('/images/social/pinterest.png?1443976015') center no-repeat #be4037;border:1px solid #be4037}#sub-nav .social a.pinterest:hover{border:1px solid #96332c}#sub-nav .social a.delicious{background:url('/images/social/delicious.png?1443976015') center no-repeat #3271cb;border:1px solid #3271cb}#sub-nav .social a.delicious:hover{border:1px solid #285aa2}#sub-nav .social a.rss{background:url('/images/social/rss.png?1443976015') center no-repeat #ef7522;border:1px solid #ef7522}#sub-nav .social a.rss:hover{border:1px solid #cf5d0f}#sub-nav .social a.instagram{background:url('/images/social/instagram.png?1443976015') center no-repeat #406e95;border:1px solid #406e95}#sub-nav .social a.instagram:hover{border:1px solid #315471}#pagenavi{padding:20px 0;height:20px;line-height:20px;position:relative;border-top:1px solid #fff;border-bottom:1px solid #ddd}#pagenavi a:hover{text-decoration:underline}#pagenavi .prev,#pagenavi .next{position:absolute}#pagenavi .prev{padding-left:30px;left:0}#pagenavi .prev:before{content:"\f060";font:1.3em FontAwesome;position:absolute;left:0}#pagenavi .next{padding-right:30px;right:0}#pagenavi .next:before{content:"\f061";font:1.3em FontAwesome;position:absolute;right:0}#pagenavi .center{text-align:center;width:100%;display:block}@media screen and (max-width: 400px){#pagenavi .center{display:none}}article{border-bottom:1px solid #ddd;border-top:1px solid #fff;padding:30px 0;position:relative}@media screen and (max-width: 800px){article{padding-bottom:15px}}@media screen and (max-width: 600px){article{padding:15px 0}}article h2.title{font-size:1.8em;font-weight:300;line-height:35px;margin-bottom:20px}article h2.title a{color:#666}article .entry-content{line-height:2;text-align:justify}article .entry-content a:hover{text-decoration:underline}article .entry-content .more-link{display:block;margin-top:16px;padding-left:30px;position:relative}article .entry-content .more-link:before{content:"\f061";font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}article .entry-content p,article .entry-content blockquote,article .entry-content ul,article .entry-content ol,article .entry-content dl,article .entry-content table,article .entry-content iframe,article .entry-content h1,article .entry-content h2,article .entry-content h3,article .entry-content h4,article .entry-content h5,article .entry-content h6,article .entry-content .video-container{margin-top:10px}article .entry-content ul,article .entry-content ol,article .entry-content dl{margin-left:20px}article .entry-content ul ul,article .entry-content ul ol,article .entry-content ul dl,article .entry-content ol ul,article .entry-content ol ol,article .entry-content ol dl,article .entry-content dl ul,article .entry-content dl ol,article .entry-content dl dl{margin-top:0}article .entry-content strong{font-weight:bold}article .entry-content em{font-style:italic}article .entry-content p{margin-top:10px}article .entry-content h2{font-weight:300;border-bottom:1px solid #ddd;position:relative}article .entry-content h2:before{content:"";position:absolute;bottom:-2px;border-bottom:1px solid #fff;width:100%}article .entry-content img,article .entry-content video{max-width:100%;height:auto}article .entry-content blockquote{background:#ddd;border-left:5px solid #ccc;padding:15px 20px;margin-top:10px}article .entry-content blockquote>p:first-of-type{margin-top:0}article .entry-content iframe{border:none}article .entry-content table{background:#ddd;border:1px solid #ccc;border-spacing:0;margin-top:10px}article .entry-content table th{background:#ccc;padding:0 15px}article .entry-content table td{text-align:center}article .entry-content table tr:nth-of-type(2n){background:#d5d5d5}article .entry-content .caption{display:block;font-size:0.9em;color:#999;padding-left:25px;position:relative}article .entry-content .caption:before{content:"\f040";color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}article .entry-content .video-container{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden}article .entry-content .video-container iframe,article .entry-content .video-container object,article .entry-content .video-container embed{position:absolute;top:0;left:0;width:100%;height:100%;margin-top:0}.share{padding:15px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}.post h2.title,.post .entry-content{margin-left:200px}@media screen and (max-width: 800px){.post h2.title,.post .entry-content{margin-left:0}}.post .meta{position:absolute;top:85px;line-height:2;font-size:0.9em;color:#999;width:170px}@media screen and (max-width: 800px){.post .meta{margin-top:15px;position:static;width:auto}}.post .meta a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}.post .meta a:hover{color:#666}.post .meta .date,.post .meta .tags,.post .meta .comments{padding-left:30px;position:relative}.post .meta .date:before,.post .meta .tags:before,.post .meta .comments:before{color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}@media screen and (max-width: 800px){.post .meta .date,.post .meta .tags,.post .meta .comments{display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;margin-right:30px}}.post .meta .date:before{content:"\f073"}.post .meta .tags:before{content:"\f02c"}.post .meta .comments:before{content:"\f075"}.archives{position:relative}.archives:last-of-type:before{content:"";position:absolute;bottom:0;width:200px;border-top:1px solid #ddd}.archives .year{line-height:35px;width:200px;position:absolute;top:0;padding-top:15px;border-top:1px solid #fff}.archives .year:before{content:"";position:absolute;top:-2px;width:100%;border-top:1px solid #ddd}@media screen and (max-width: 600px){.archives .year{position:relative;width:100%}}.archives article{margin-left:200px;padding:15px 0}@media screen and (max-width: 600px){.archives article{margin-left:0}.archives article:first-of-type{border-top:none;padding-top:30px}}.archives article .title{margin-bottom:0}.archives article .meta{line-height:2;font-size:0.9em;color:#999;margin-top:15px}@media screen and (max-width: 600px){.archives article .meta{display:none}}.archives article .meta a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}.archives article .meta a:hover{color:#666}.archives article .meta .date,.archives article .meta .tags,.archives article .meta .comments{padding-left:30px;position:relative}.archives article .meta .date:before,.archives article .meta .tags:before,.archives article .meta .comments:before{color:#ccc;font:1.3em FontAwesome;line-height:1.6em;position:absolute;left:0}@media screen and (max-width: 600px){.archives article .meta .date,.archives article .meta .tags,.archives article .meta .comments{display:inline-block;vertical-align:middle;*vertical-align:auto;*zoom:1;*display:inline;margin-right:30px}}.archives article .meta .date:before{content:"\f073"}.archives article .meta .tags:before{content:"\f02c"}.archives article .meta .comments:before{content:"\f075"}#comment{padding:30px 0;border-top:1px solid #fff;border-bottom:1px solid #ddd}#comment h2.title{font-size:25px;font-weight:300;line-height:35px;margin-bottom:20px}footer{padding:15px 0;border-top:1px solid #fff;text-align:center;font-size:0.9em}article code,article pre{background:#ddd;border:1px solid #ccc;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace}article code{font-size:0.9em;padding:1px 3px;margin:0 3px;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}article pre{font-size:1 / 0.9em;line-height:1.5;margin-top:10px;padding:5px 15px;overflow-x:auto;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}article pre code{background:none;border:none;padding:0;margin:0;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}figure.code{background:#ddd;border:1px solid #ccc;margin-top:10px;padding:5px 15px;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}figure.code figcaption{font-size:0.9em;position:relative}figure.code figcaption span{margin:-5px -15px 0;padding:5px 15px;display:block;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cccccc),color-stop(100%, #dddddd));background:-moz-linear-gradient(top, #cccccc,#dddddd);background:-webkit-linear-gradient(top, #cccccc,#dddddd);background:linear-gradient(to bottom, #cccccc,#dddddd)}figure.code figcaption span:empty{display:none}figure.code figcaption a{position:absolute;top:5px;right:0}figure.code code,figure.code pre{background:none;border:none;padding:0;margin:0;-moz-border-radius:0;-webkit-border-radius:0;border-radius:0}figure.code .highlight{overflow-x:auto}figure.code .line-numbers{border-right:1px solid #ccc;font-family:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;padding-right:15px;text-align:right}figure.code table{border:none;text-align:left;margin-top:0}figure.code table td{text-align:left}figure.code td.code{width:100%;padding-left:15px;overflow-x:auto}.entry-content .gist{background:#ddd;color:#666;padding:30px 15px 5px;margin-top:10px;border:1px solid #ccc;position:relative;overflow:hidden;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.entry-content .gist .gist-file{margin:0}.entry-content .gist .gist-file .gist-data{background:none;border:none}.entry-content .gist .gist-file .gist-data pre{font:Menlo,Monaco,"Andale Mono","lucida console","Courier New",monospace;line-height:inherit;text-align:left}.entry-content .gist .gist-file .gist-meta{font:300 0.9em "HelveticaNeue-Light","Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif;line-height:1.5;margin:0 -16px -6px;padding:5px 15px;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #dddddd),color-stop(100%, #cccccc));background:-moz-linear-gradient(top, #dddddd,#cccccc);background:-webkit-linear-gradient(top, #dddddd,#cccccc);background:linear-gradient(to bottom, #dddddd,#cccccc)}.entry-content .gist .gist-file .gist-meta a{color:#258fb8}.entry-content .gist .gist-file .gist-meta a:first-of-type{position:absolute;top:5px;right:15px;z-index:1}.entry-content .gist .gist-file .gist-meta a:nth-of-type(2){position:absolute;top:0;left:0;padding:5px 15px;width:100%;background:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuNSIgeTE9IjAuMCIgeDI9IjAuNSIgeTI9IjEuMCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2NjY2NjYyIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2RkZGRkZCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');background:-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cccccc),color-stop(100%, #dddddd));background:-moz-linear-gradient(top, #cccccc,#dddddd);background:-webkit-linear-gradient(top, #cccccc,#dddddd);background:linear-gradient(to bottom, #cccccc,#dddddd)}figure.code .c,.gist-highlight .c{color:#93a1a1 !important;font-style:italic !important}figure.code .cm,.gist-highlight .cm{color:#93a1a1 !important;font-style:italic !important}figure.code .cp,.gist-highlight .cp{color:#93a1a1 !important;font-style:italic !important}figure.code .c1,.gist-highlight .c1{color:#93a1a1 !important;font-style:italic !important}figure.code .cs,.gist-highlight .cs{color:#93a1a1 !important;font-weight:bold !important;font-style:italic !important}figure.code .err,.gist-highlight .err{color:#dc322f !important;background:none !important}figure.code .k,.gist-highlight .k{color:#cb4b16 !important}figure.code .o,.gist-highlight .o{color:#586e75 !important;font-weight:bold !important}figure.code .p,.gist-highlight .p{color:#586e75 !important}figure.code .ow,.gist-highlight .ow{color:#2aa198 !important;font-weight:bold !important}figure.code .gd,.gist-highlight .gd{color:#586e75 !important;background-color:#f5c5b6 !important;display:inline-block}figure.code .gd .x,.gist-highlight .gd .x{color:#586e75 !important;background-color:#f1b1a4 !important;display:inline-block}figure.code .ge,.gist-highlight .ge{color:#586e75 !important;font-style:italic !important}figure.code .gh,.gist-highlight .gh{color:#93a1a1 !important}figure.code .gi,.gist-highlight .gi{color:#586e75 !important;background-color:#e5e3b6 !important;display:inline-block}figure.code .gi .x,.gist-highlight .gi .x{color:#586e75 !important;background-color:#cdd188 !important;display:inline-block}figure.code .gs,.gist-highlight .gs{color:#586e75 !important;font-weight:bold !important}figure.code .gu,.gist-highlight .gu{color:#6c71c4 !important}figure.code .kc,.gist-highlight .kc{color:#859900 !important;font-weight:bold !important}figure.code .kd,.gist-highlight .kd{color:#268bd2 !important}figure.code .kp,.gist-highlight .kp{color:#cb4b16 !important;font-weight:bold !important}figure.code .kr,.gist-highlight .kr{color:#d33682 !important;font-weight:bold !important}figure.code .kt,.gist-highlight .kt{color:#2aa198 !important}figure.code .n,.gist-highlight .n{color:#268bd2 !important}figure.code .na,.gist-highlight .na{color:#268bd2 !important}figure.code .nb,.gist-highlight .nb{color:#859900 !important}figure.code .nc,.gist-highlight .nc{color:#d33682 !important}figure.code .no,.gist-highlight .no{color:#b58900 !important}figure.code .nl,.gist-highlight .nl{color:#859900 !important}figure.code .ne,.gist-highlight .ne{color:#268bd2 !important;font-weight:bold !important}figure.code .nf,.gist-highlight .nf{color:#268bd2 !important;font-weight:bold !important}figure.code .nn,.gist-highlight .nn{color:#b58900 !important}figure.code .nt,.gist-highlight .nt{color:#268bd2 !important;font-weight:bold !important}figure.code .nx,.gist-highlight .nx{color:#b58900 !important}figure.code .vg,.gist-highlight .vg{color:#268bd2 !important}figure.code .vi,.gist-highlight .vi{color:#268bd2 !important}figure.code .nv,.gist-highlight .nv{color:#268bd2 !important}figure.code .mf,.gist-highlight .mf{color:#2aa198 !important}figure.code .m,.gist-highlight .m{color:#2aa198 !important}figure.code .mh,.gist-highlight .mh{color:#2aa198 !important}figure.code .mi,.gist-highlight .mi{color:#2aa198 !important}figure.code .s,.gist-highlight .s{color:#2aa198 !important}figure.code .sd,.gist-highlight .sd{color:#2aa198 !important}figure.code .s2,.gist-highlight .s2{color:#2aa198 !important}figure.code .se,.gist-highlight .se{color:#dc322f !important}figure.code .si,.gist-highlight .si{color:#268bd2 !important}figure.code .sr,.gist-highlight .sr{color:#2aa198 !important}figure.code .s1,.gist-highlight .s1{color:#2aa198 !important}#banner{color:#999;padding:30px 0;line-height:30px;text-align:center;position:relative;display:none;border-top:1px solid #fff;border-bottom:1px solid #ddd}#banner:hover a{color:#258fb8}#banner a{color:#999;-moz-transition:0.3s;-o-transition:0.3s;-webkit-transition:0.3s;transition:0.3s}#banner a:hover{text-decoration:underline}#banner small{position:absolute;right:0;bottom:0}#banner .loading{background:url('/images/loading_pacman.gif?1443976015') center no-repeat;text-indent:-9999px}#banner .container{height:30px;overflow:hidden;position:relative;display:none}#banner .container .feed{list-style:none;position:absolute;top:0;width:100%}#banner .container .feed li{position:relative}#banner .container .feed li small{position:absolute;right:0}/*! fancyBox v2.0.6 fancyapps.com | fancyapps.com/fancybox/#license */.fancybox-tmp iframe,.fancybox-tmp object{vertical-align:top;padding:0;margin:0}.fancybox-wrap{position:absolute;top:0;left:0;z-index:8020}.fancybox-skin{position:relative;padding:0;margin:0;background:#f9f9f9;color:#444;text-shadow:none;-moz-border-radius:4px;-webkit-border-radius:4px;border-radius:4px}.fancybox-opened{z-index:8030}.fancybox-opened .fancybox-skin{-moz-box-shadow:0 10px 25px rgba(0,0,0,0.5);-webkit-box-shadow:0 10px 25px rgba(0,0,0,0.5);box-shadow:0 10px 25px rgba(0,0,0,0.5)}.fancybox-outer,.fancybox-inner{padding:0;margin:0;position:relative;outline:none}.fancybox-inner{overflow:hidden}.fancybox-type-iframe .fancybox-inner{-webkit-overflow-scrolling:touch}.fancybox-error{color:#444;font:14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;margin:0;padding:10px}.fancybox-image,.fancybox-iframe{display:block;width:100%;height:100%;border:0;padding:0;margin:0;vertical-align:top}.fancybox-image{max-width:100%;max-height:100%}#fancybox-loading,.fancybox-close,.fancybox-prev span,.fancybox-next span{background-image:url('/images/fancybox/fancybox_sprite.png?1443976015')}#fancybox-loading{position:fixed;top:50%;left:50%;margin-top:-22px;margin-left:-22px;background-position:0 -108px;opacity:0.8;cursor:pointer;z-index:8020}#fancybox-loading div{width:44px;height:44px;background:url('/images/fancybox/fancybox_loading.gif?1443976015') center center no-repeat}.fancybox-close{position:absolute;top:-18px;right:-18px;width:36px;height:36px;cursor:pointer;z-index:8040}.fancybox-nav{position:absolute;top:0;width:40%;height:100%;cursor:pointer;background:transparent url('/images/fancybox/blank.gif?1443976015');-webkit-tap-highlight-color:transparent;z-index:8040}.fancybox-prev{left:0}.fancybox-next{right:0}.fancybox-nav span{position:absolute;top:50%;width:36px;height:34px;margin-top:-18px;cursor:pointer;z-index:8040;visibility:hidden}.fancybox-prev span{left:20px;background-position:0 -36px}.fancybox-next span{right:20px;background-position:0 -72px}.fancybox-nav:hover span{visibility:visible}.fancybox-tmp{position:absolute;top:-9999px;left:-9999px;padding:0;overflow:visible;visibility:hidden}#fancybox-overlay{position:absolute;top:0;left:0;overflow:hidden;display:none;z-index:8010;background:#000}#fancybox-overlay.overlay-fixed{position:fixed;bottom:0;right:0}.fancybox-title{visibility:hidden;font:normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;position:relative;text-shadow:none;z-index:8050}.fancybox-opened .fancybox-title{visibility:visible}.fancybox-title-float-wrap{position:absolute;bottom:0;right:50%;margin-bottom:-35px;z-index:8030;text-align:center}.fancybox-title-float-wrap .child{display:inline-block;margin-right:-100%;padding:2px 20px;background:transparent;background:rgba(0,0,0,0.8);text-shadow:0 1px 2px #222;color:#FFF;font-weight:bold;line-height:24px;white-space:nowrap;-moz-border-radius:15px;-webkit-border-radius:15px;border-radius:15px}.fancybox-title-outside-wrap{position:relative;margin-top:10px;color:#fff}.fancybox-title-inside-wrap{margin-top:10px}.fancybox-title-over-wrap{position:absolute;bottom:0;left:0;color:#fff;padding:10px;background:#000;background:rgba(0,0,0,0.8)}

	</style>
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">My Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.noppanit.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/noppanit" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/noppanit" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.noppanit.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/does-twitter-marketing-work-for-you-it-works-for-me/">
		
			Does Twitter Marketing Work for You? It Works for Me.</a>
	</h2>
	<div class="entry-content">
		<p>I think everybody knows Twitter, if you haven&#8217;t used it. I&#8217;m pretty sure that you might have heard of it at some point. So, briefly it&#8217;s a service where you can post anything in 140 characters. Most people tweet about news and what&#8217;s going on in their life. But some people is monitoring some hashtag or keywords and spam you back as well.</p>

<p>However, recently I&#8217;ve been tweeting and complaining or even asking questions a lot on Twitter and am surprise the response I got back every time. I know this is not something new.</p>

<p>For example, I didn&#8217;t know where to find a dentist, so I tweeted &#8220;Where can I find a dentist around Holborn?&#8221; And this is the response I got.</p>

<blockquote><p>@noppanit We have studios Covent Garden, Soho, Bank Moorgate and Canary Wharf if any of these suit?</p></blockquote>

<p>And I went there and I was happy to go there. So, if you&#8217;re a small business and don&#8217;t know where to start marketing, twitter marketing by monitoring keywords and hashtags might work for you.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Apr 20th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/why-i-join-live-below-the-line/">
		
			Why I Join Live Below the Line?</a>
	</h2>
	<div class="entry-content">
		<p>I believe all of us have heard this problem before through all kinds of channels, the Internet, TV, Facebook, Twitter, from your friends or even seeing themselves from guys on the street.</p>

<p>But why I join this <a href="https://www.livebelowtheline.com" title="live below the line" target="_blank">programme</a>?, at first I heard this challenge from my friend, <a href="https://twitter.com/CEPitchford" title="Clair Pitchford" target="_blank">Clair Pitchford</a>. Live Below the Line, it&#8217;s a challenge where you have to<br/>
spend under 1 pound a day for 5 days and you raise money for the needy. Why £1? The short version is that you will be under extreme poverty if you only have $1.25 to spend in one day, more information can be found <a href="https://www.livebelowtheline.com/uk-why-1" title="why £1" target="_blank">here</a>.</p>

<p>I&#8217;m from Thailand. Thailand is not a poor country after all, compare to India, Africa or other third-world countries. But we do have a hugh gap between the rich and the poor. I don&#8217;t come from a poor background but my family struggled quite a bit when I was a child. Sometime we didn&#8217;t have enough food and a lot of debt to pay. I was too young to remember any of those hard times.</p>

<p>Now I work in the UK, my life is better and I have a reasonably good job. Plus, I travel a lot I have been to many countries around Europe and Asia. I have seen and met a lot of rough sleepers. Some of them are legit, but some of them they just want to buy some drink. One time, I got stopped by a homeless asking for 50p to buy a beer, I thought he was honest so I gave him 50p. Some of them told me a lot of story how poor they are, kids and lot of stuff so they can get some money. Sometime I feel sorry for those people, I&#8217;m sure you have asked this question yourself sometime as well. But we also have to accept the reality that we cannot help those people with just a few pennies. Even though we have lots and lots of organisations trying to help those people, we still have poverty, malnutrition children and people who don&#8217;t have access to clean water. So what can we do?</p>

<iframe src="https://embed-ssl.ted.com/talks/bono_the_good_news_on_poverty_yes_there_s_good_news.html" width="560" height="315" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p>However, we have some good news as well.</p>

<p>For the past years, I have worked with 2 organisations in Thailand and in India. <a href="http://goodwillthailand.org/" title="Goodwill Thailand">Goodwill Thailand</a>, the organisation helps disadvantaged women in Thailand by educating them and training them. I know this organisation through my friend, she has worked with this organisation before so I joined later.</p>

<p>What I did was that I volunteered just 2 hours of my weekend time to teach them English and how to use computer. English course in Thailand is quite expensive and not everybody can afford the course. Just this it will help them to get a better job and better quality of life. If they can just make a simple conversation in English they can work as a receptionist in a hotel instead of a cleaner (Apologises, I don&#8217;t mean to be disrespectful about any professions). Or they can be a baby sitter for expats in Bangkok which they will get paid more than minimum average. The minimum wage in Thailand is 10 dollars a day.</p>

<p>The second organisation is <a href="http://www.sukrupa.org" title="Sukrupa">Sukrupa</a>. This organisations helps deprived children in Bangalore by giving them education and even helping their parents. The programme is initiated by Krupa which I had a chance to know when when I was in Bangalore for a six-week training from ThoughtWorks. We were bought in to help them develop a website to get more traction on the Internet. So, they can raise more money to help all the children.</p>

<p>Back to Live Below the Line, as I have worked with two organisations I have realised that with my current status the best way to fight this problem is to donate skills and create awareness. If I can help them get back on their feet quickly, then they can help themselves later. If we give them food once they&#8217;ve eaten that food, it&#8217;s gone. If we teach them to cook the food, they can produce the food for the rest of their life. Also, another reason is that if I can create more awareness so more people know and realise the problem even to the top where powerful people can really make a different.</p>

<p>More video that inspires me.</p>

<iframe src="https://embed-ssl.ted.com/talks/dan_pallotta_the_way_we_think_about_charity_is_dead_wrong.html" width="560" height="315" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p><a href="https://www.livebelowtheline.com/me/noppanit" title="noppanit">My Live Below the Line</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">




Apr 4th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/how-to-index-all-wikipedia-english-data-using-elasticsearc/">
		
			How to Index All Wikipedia (English) Data Using Elasticsearch?</a>
	</h2>
	<div class="entry-content">
		<p>I have been researching on how to get a context out of a piece of text. There are lots of techniques to do that, Information Retriever, Noun Chunker, Text Classification and etc. One technique that I have been trying to do but it&#8217;s quite difficult because of the resources and cannot be done on-the-fly is from wikipedia. Wikipedia is like a central repository where human being can contribute to add more content for other people. So, every article is written by human with some potential keywords in the text. For example, if the article is about dog, it&#8217;s likely that in the text contains word &#8220;dog&#8221; or other synonyms. However, by just indexing all the wikipedia data is not quite enough, because that means you can only search through the content which Google or Bing is doing a better job obviously. What I&#8217;m interested in <a href="http://www.elasticsearch.org/" title="elasticsearch">Elasticsearch</a> is <a href="http://en.wikipedia.org/wiki/Cosine_similarity" title="cosine similarity">Cosine Similarity</a> which roughly speaking is a technique to determine how similar between two vectors. Elasticsearch provide just that which is <a href="http://www.elasticsearch.org/guide/reference/api/more-like-this/">&#8220;More like this&#8221;</a> functionality. More like this technique in elasticsearch is a way you can easily measure how similar two pieces of content is. The usage is easy, just index all the text you want it to be searchable and input another piece of text then elasticsearch will give you a score.</p>

<p>Instead of doing everything yourself, Elasticsearch has a plugin called <a href="https://github.com/elasticsearch/elasticsearch-river-wikipedia" title="elasticsearch wikipedia">elasticsearch-river-wikipedia</a> which will do everything for you from downloading all the dumped wiki data to index all the data for you to search immediately. However, I found little documentation for this one on how to use this for a Elasticsearch virgin like me.</p>

<p>So, here&#8217;s how I do it.</p>

<p>First of course you need to install elasticsearch. If you&#8217;re on a Mac, I suggest you to use Homebrew.</p>

<p>Then you need to install the plugin by following <a href="https://github.com/elasticsearch/elasticsearch-river-wikipedia">these steps</a>. And that should be it. However, I have looked at the plugin sourcecode and it will download the 30GB data and unzip it and index it for you in the background. There&#8217;s not logs or any indication. I find it quite hard to see when it&#8217;s finished. I actually had to listen to my CPU fan to stop then I realised that it&#8217;s done indexing. But here&#8217;s what I did to make it slightly faster and more obvious.</p>

<p>The downloading takes a while depends on your connection. So, I suggest you to download the file <a href="http://download.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2" title="Wiki dump">yourself</a> and then unzip it. Then use this command to create index.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>curl -XPUT localhost:9203/_river/wikipedia/_meta -d <span class="s1">&#39;</span>
</span><span class='line'><span class="s1">{</span>
</span><span class='line'><span class="s1">    &quot;type&quot; : &quot;wikipedia&quot;,</span>
</span><span class='line'><span class="s1">    &quot;wikipedia&quot; : {</span>
</span><span class='line'><span class="s1">        &quot;url&quot; : &quot;file:///${PATH_TO_YOUR_FOLDER}/enwiki-latest-pages-articles.xml&quot;</span>
</span><span class='line'><span class="s1">    }</span>
</span><span class='line'><span class="s1">}</span>
</span><span class='line'><span class="s1">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will speed up the process a lot and it will reduce the chance that your JVM will face PERMGen exception because the plugin will try to unzip the 30GB data for you as well. Then just wait for the indexing to finish. You can try to see the status of your node from your browser by typing this <a href="http://localhost:9200/_stats">http://localhost:9200/_stats</a> in your favourite browser. The size of the finished index is around 40GB.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Apr 4th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/maybe-i-have-just-got-scroogled/">
		
			Maybe I Have Just Got Scroogled?</a>
	</h2>
	<div class="entry-content">
		<p>I think everybody might know this campaign from Microsoft, <a href="http://www.scroogled.com/">http://www.scroogled.com/</a>. Microsoft claims that they don&#8217;t index our email or track everything in our life in order to sell ads and Google is evil and we should switch to outlook.com. At first I think it&#8217;s cool if I could get some really cool ads or relevant ads but after seeing this I&#8217;m kinda scared of Google now.</p>

<p><img src="http://www.noppanit.com/wp-content/uploads/2013/03/Screen-Shot-2013-03-15-at-09.08.49.png"></p>

<p>Exactly I&#8217;m not English but I work in London and I&#8217;ve been sent to Germany for 9 months now for work. So, I&#8217;m kinda an expat from England. Also, recently I have been talking to the finance team of my company about tax refund because I&#8217;ve been spending time in Germany more than 163 days. Of course, I&#8217;m using Gmail as the form of communication.</p>

<p>The ad is super accurate, but the question is about the privacy. Is it good to have Google indies all of your data including your private conversation in order to get relevant ads? Well, I don&#8217;t know but if looking at the other way around it&#8217;s good for business because they can really focus on correct target customers.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Mar 15th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/javascript-tdd-on-file-upload/">
		
			JavaScript TDD on on File Upload.</a>
	</h2>
	<div class="entry-content">
		<p>Right now, I&#8217;m trying to do HTML5 file upload but I also want to write some test as well. So, I just want to post it here. <a href="http://postposttechnical.com/2011/03/spying-with-jasmine/">http://postposttechnical.com/2011/03/spying-with-jasmine/</a> This blog post really inspires me on how to use Jasmine to drive JavaScript test. Maybe my code is wrong, but any feedback is welcome.</p>

<p>So, I have this code</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">Uploader</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">file</span> <span class="o">=</span> <span class="nx">file</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Uploader</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span>  <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">upload_file</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">file_content</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">file_data</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">file_data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">file_data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;mimetype&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">file_data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="nx">file_content</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">file_data</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>          <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/upload/file&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">data</span><span class="o">:</span> <span class="nx">file_content</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">contentType</span><span class="o">:</span> <span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
</span><span class='line'>          <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">xhr</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">myXhr</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span><span class="p">();</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span><span class="nx">myXhr</span><span class="p">.</span><span class="nx">upload</span><span class="p">){</span>
</span><span class='line'>                  <span class="nx">myXhr</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;progress&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">progressbar</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Upload progress is not supported.&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>              <span class="k">return</span> <span class="nx">myXhr</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">showPreview</span><span class="p">(</span><span class="nx">file_content</span><span class="p">,</span> <span class="nx">thumbnailDiv</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">image</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span>  <span class="nx">file_content</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">thumbnailDiv</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">upload</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">file_content</span> <span class="o">=</span> <span class="p">{},</span>
</span><span class='line'>        <span class="nx">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FileReader</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">file_content</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">showPreview</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">thumbnailDiv</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">upload_file</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">file</span><span class="p">,</span> <span class="nx">file_content</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
</span><span class='line'>      <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>      <span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">file</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">})();</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this is my test</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;Uploader&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">eventListener</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">fakeFile</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">spyOn</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="s2">&quot;ajax&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">eventListener</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">spyOn</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;FileReader&quot;</span><span class="p">).</span><span class="nx">andReturn</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">addEventListener</span><span class="o">:</span> <span class="nx">eventListener</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">readAsDataURL</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// do nothing.</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">uploader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uploader</span><span class="p">(</span><span class="nx">fakeFile</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;should upload a file successfully&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">thumbnailElement</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">uploader</span><span class="p">.</span><span class="nx">upload</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">progressbar</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">thumbnailDiv</span> <span class="o">:</span> <span class="nx">thumbnailElement</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">eventListener</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">eventListener</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]({</span>
</span><span class='line'>      <span class="nx">target</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">result</span> <span class="o">:</span> <span class="s1">&#39;file content&#39;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s2">&quot;/upload/file&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s2">&quot;POST&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;should show a preview image&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">thumbnailElement</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">thumbnailElement</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="nx">jasmine</span><span class="p">.</span><span class="nx">createSpy</span><span class="p">(</span><span class="s2">&quot;fake thumbnail div&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">uploader</span><span class="p">.</span><span class="nx">upload</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">progressbar</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">thumbnailDiv</span> <span class="o">:</span> <span class="nx">thumbnailElement</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">eventListener</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]({</span>
</span><span class='line'>      <span class="nx">target</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">result</span> <span class="o">:</span> <span class="s1">&#39;file_content&#39;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">thumbnailElement</span><span class="p">.</span><span class="nx">append</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">hasFileSrc</span> <span class="o">=</span> <span class="nx">thumbnailElement</span><span class="p">.</span><span class="nx">append</span><span class="p">.</span><span class="nx">mostRecentCall</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;file_content&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">hasFileSrc</span><span class="p">).</span><span class="nx">toNotEqual</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>I had to spy on FileReader in order to test it. But it really help me improve my code.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Mar 10th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/javascript/'>javascript</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/flask-and-rq-example-for-heroku/">
		
			Flask and RQ Example for Heroku</a>
	</h2>
	<div class="entry-content">
		<p>I have been struggling to find any example on the Internet on how to do long polling on Heroku with Flask and RQ. I know it&#8217;s relatively easy, but I just want to make it clear for my future self.</p>

<p>It&#8217;s really simple.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/get_word_count&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;POST&#39;</span><span class="p">])</span>
</span><span class='line'><span class="k">def</span> <span class="nf">get_word_count</span><span class="p">():</span>
</span><span class='line'>    <span class="n">data_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>    <span class="n">job</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">word_counter</span><span class="o">.</span><span class="n">count_words</span><span class="p">,</span> <span class="n">data_json</span><span class="p">[</span><span class="s">&quot;sentence&quot;</span><span class="p">])</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">job</span><span class="o">.</span><span class="n">key</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/get_word_count_result/&lt;job_key&gt;&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;GET&#39;</span><span class="p">])</span>
</span><span class='line'><span class="k">def</span> <span class="nf">get_word_count_result</span><span class="p">(</span><span class="n">job_key</span><span class="p">):</span>
</span><span class='line'>    <span class="n">job_key</span> <span class="o">=</span> <span class="n">job_key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;rq:job:&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">job_key</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="ow">not</span> <span class="n">job</span><span class="o">.</span><span class="n">is_finished</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;Not yet&quot;</span><span class="p">,</span> <span class="mi">202</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">),</span> <span class="mi">200</span>
</span></code></pre></td></tr></table></div></figure>


<p>The key is here</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">job</span> <span class="o">=</span> <span class="n">Job</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">job_key</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The fetch command is used to get the job by job_id, you can also use</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">get_current_job</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>as well, but I just want to make it clear that if there are more concurrent requests coming in, I&#8217;ll get the right result back.</p>

<p>I posted an example here. <a href="https://github.com/noppanit/heroku-flask-rq-worker" title="Python with RQ on Heroku">https://github.com/noppanit/heroku-flask-rq-worker</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">




Mar 8th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/python/'>python</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/lesson-learnt-from-data-cleansing-part-ii/">
		
			Lesson Learnt From Data Cleansing. Part II</a>
	</h2>
	<div class="entry-content">
		<p>Ok as I have done the <a href="https://www.noppanit.com/lesson-learnt-from-data-cleansing/" title="data cleansing part I">part I</a> I have learnt another thing from data cleansing. I believe the best tool for data analysis is <a href="http://www.r-project.org/" title="R">R</a> but the learning is quite steep but I&#8217;m trying to learn it right now. Hopefully if I can get some results from this with neo4j I could move on to use R to get some more statistical results.</p>

<p>Now, the second challenge I got was that the CSV file is about 1GB with around 100 columns and I was trying to use Ruby to parse that. Obviously, I got <strong>Killed</strong> results from my Terminal even before I got to the first line. So, Ruby has to load everything into memory and parse that. But as I&#8217;m running everything in my small Mac. It seems to be quite a challenging. So, what I have done is to dump everything to MySQL. This time works really good. MySQL has <a href="http://dev.mysql.com/doc/refman/5.1/en/load-data.html" title="Load data mysql">LOAD DATA FILE</a> which can load CSV file into a table. It only took me around <string>20 seconds</strong> to load 1GB of CSV into a table. I dumped the table out and it was around 1GB which is not too bad. Now the next challenge was that I also had to filter out the events that were created by real users (I&#8217;m doing this <a href="http://www.kaggle.com/c/event-recommendation-engine-challenge" title="kaggle competition">Kaggle competition</a>). I had around 3 million rows which is now that much. And I used MySQL which comes with XAMPP. My first query took me around 8 hours without spitting any results back. So, I gave up and did a couple research on how to make MySQL faster, but I&#8217;m not a DBA and I didn&#8217;t have time to read the whole book about MySQL performance tuning.</p>

<p><strong>First attempt</strong><br/>
Index joined columns and changed the table schema to something small. I used <strong>VARCHAR(50)</strong> instead of <strong>VARCHAR(255)</strong> and of course I used <strong>NUMBER(3)</strong> instead of <strong>VARCHAR(5)</strong></p>

<p>Still, I couldn&#8217;t get the results back in 1 hour which I think MySQL is better than that.</p>

<p><strong>Second attempt</strong><br/>
So, I moved on to the next one. It looked like everybody on the Internet suggested <strong>key_buffer_size</strong> or <strong>key_buffer</strong> to 4G. And changed some of the variables to pimp MySQL up a little bit.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  * query\_cache\_type = 1
</span><span class='line'>  * query\_cache\_size = 128M
</span><span class='line'>  * query\_cache\_limit = 128M&gt;</span></code></pre></td></tr></table></div></figure>


<p>Still, I couldn&#8217;t get the results back.</p>

<p>And suddenly I caught something in my <strong>my.cnf</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Example MySQL config file for small systems.
</span><span class='line'># This is for a system with little memory (&lt;= 64M) where MySQL is only used
</span><span class='line'># from time to time and it's important that the mysqld daemon
</span><span class='line'># doesn't use much resources.
</span><span class='line'>#
</span></code></pre></td></tr></table></div></figure>


<p>What is said was that XAMPP is tuned for a very small computer to be able to run basic PHP and MySQL application which is why my MySQL performed really bad in this case.</p>

<p><strong>Final attempt</strong><br/>
I started my EC2 instance with 7GB of memory and installed MySQL (normal one) also some of the performance tuning variables. Now, I got the results back in just under 20 seconds to join two tables with around 3 millions rows.</p>

<blockquote><p>Lesson learnt: Do not use MySQL from XAMPP for data that is big and use query that would get smaller results. For example, in my case instead of filtering out user_ids that don&#8217;t exist in Users table. I filtered user_ids that exist instead.</p></blockquote>

<p>I also thought about of using BigQuery from Google but I guess my data is rather small and can hardly be called big data. Next time, I might try to use BigQuery just for fun.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Feb 11th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/database/'>database</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/lesson-learnt-from-data-cleansing/">
		
			Lesson Learnt From Data Cleansing. Part I</a>
	</h2>
	<div class="entry-content">
		<p>Lately, I have been experimenting on <a href="http://www.kaggle.com/c/event-recommendation-engine-challenge">Kaggle competition</a>. This is the one I chose because I want to use neo4j to give some recommendation or in a sense I want to do unsupervised learning. From day one I faced a lot of problem dealing with a lot of data and they are not clean in a way. For example, in this competition, there is users dataset which contains all the users. And there is a friend dataset which contains all the friends. The data look like this.</p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2013/02/Screen-shot-2013-02-01-at-00.08.50.png" alt="users dataset" class="aligncenter size-full wp-image-1028 cool_border" /></p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2013/02/Screen-shot-2013-02-01-at-00.08.28.png" alt="friends dataset" class="aligncenter size-full wp-image-1029 cool_border" /></p>

<p>The first dataset I could dump everything into neo4j without any problem because it&#8217;s just 30000 records it only took me 5 mins to do it. However, the second dataset was kind of a problem because the column <strong>friends</strong> not all of the ids exist in users database which means the users don&#8217;t exist. So, I had to check if the ids exist in user dataset or not. It turned out that the friends dataset is quite large (about 50 MB) and it could be 3000 ids in one column. So, my first thought would be just to do it one by one.</p>

<p><strong>Frist attempt</strong><br/>
So, what I did first was to dump the whole users dataset to neo4j. And then for loop to check if id exists then insert if not just ignore it. I used cypher to check if the id exists. It turned out that I left my computer for 24 hours and it went just only 10% of the data. It was really slow. One thing from this was that I used neography which means it&#8217;s using REST api which usually it&#8217;s slower than embedded code. And I couldn&#8217;t wait for a whole week just to import the data. So, I moved on. The slow part was the checking every time so I guess it would be nice to clean the data before I dump that to neo4j.</p>

<p><strong>Second attempt</strong><br/>
I tried to use Google Refine to cross check two datasets but it couldn&#8217;t even pass the stage <strong>&#8220;split multi-valued cells&#8221;</strong> which to split column values to rows. Google Refine uses too much ram. I even tried to start EC2 instance but it froze along the way as well. I posted the question and got the solution <a href="http://stackoverflow.com/questions/14636919/google-refine-cross-reference-between-row-and-column">here</a></p>

<p><strong>Third attempt</strong><br/>
I used MySQL to join the tables and and check if the ids exist. Dumping all the data to MySQL was pretty easy my plain old PHP and MySQL. It turned out the friends dataset got around 38 Million rows. And here&#8217;s the script I used to check if the id doesn&#8217;t exit spit it out and delete it.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> SELECT uf.id, uf.friend_id, u.user_id FROM eventify.UserFriends uf LEFT JOIN eventify.Users u on uf.friend_id = u.user_id WHERE u.user_id is NULL LIMIT 1</span></code></pre></td></tr></table></div></figure>


<p>It was also really slow since I just use my Macbook and didn&#8217;t even turn MySQL performance. So I moved on again.</p>

<p><strong>Final attempt</strong><br/>
I couldn&#8217;t believe that this will be the simplest and most effective way. What I did was to dump the whole users dataset to <strong>Hash</strong> in Ruby and check the friends dataset which surprisingly it only took Ruby 10 mins to do that. Then it only took Ruby and neo4j around 2 hours to import the cleaned data.</p>

<blockquote><p>So lesson learnt for me was if anything can be done in memory do that first.</p></blockquote>

<p>I&#8217;ll try to dump the rest in and blog about how did I get on with recommendation engine from neo4j.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Feb 7th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/enable-defalter-compression-for-sinatra-on-herok/">
		
			Enable Defalter Compression for Sinatra on Heroku</a>
	</h2>
	<div class="entry-content">
		<p>You guys must have heard about PageSpeed test from Google. It&#8217;s a really cool plugin for Chrome to let you know how you can optimize your webpage faster. I have been using it for a while but I couldn&#8217;t get my head around gzip compression which it seems that Google has taken that seriously. If you want the science bit. Here&#8217;s the <a href="https://developers.google.com/speed/articles/gzip" title="gzip">article</a> from Google.</p>

<p>And here&#8217;s the quickstart bit. The most simplest way is to put the compression in <strong>config.ru</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;./server&#39;</span>
</span><span class='line'><span class="n">use</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Deflater</span>
</span><span class='line'><span class="n">run</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Application</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that&#8217;s it I hope this will save you sometime.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Jan 15th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/forest-walking-in-luxembourg-mullerthal-trail/">
		
			Forest Walking in Luxembourg : Mullerthal Trail</a>
	</h2>
	<div class="entry-content">
		<p style="text-align: center;">
  <a href="#" rel="attachment wp-att-1016"><img class="aligncenter  wp-image-1016 cool_border" alt="Mullerthal Trail" src="https://www.noppanit.com/wp-content/uploads/2013/01/IMG_0021-edited-682x1024.jpg" width="477" height="717" /></a>
</p>


<p>I have been travelling a lot due to work and sometimes I&#8217;m tried of getting to the airport, catching the train or getting on a crowded bus. So, I thought it would be nice just to get away. And just a couple hours I was in Luxembourg the country where people go there to just tick the box.</p>

<blockquote><p>One important thing is that if you have a connection at Charles de Gaulle International Airport at Paris. Please spare some time at least 1 hour even though it&#8217;s just one building away. The airport is really big and maybe you have to pass the security check again after you landed. I almost missed my connection because I thought it&#8217;s just 2F and 2D how long would it take to walk. It&#8217;s actually about 20 min walk-and-run.</p></blockquote>

<p>After I landed, the airport is small and not much to see or shop. Without hesitation, for a be-backpacker like me taxi is out of the question. Luxembourg airport has direct buses to the city centre. Just hop on the bus there and tell the driver <strong>main train station or hauptbahnhof</strong>. They use French as the main language but everybody understands German.</p>

<p>And yeh as I said I was bored with the city so I arrived at the main train station and headed straight to the bus stop to get on the bus number 111 or 110 to Echternach for <a href="http://www.mullerthal-trail.lu/en/" title="Mullerthal Trail">Mullerthal Trail</a>. The ticket is just 2 Euro and the journey takes about 45 min. It&#8217;s a really good deal.</p>

<p>After arriving at the village the temperature was about 2 degree it&#8217;s nice and chilly. I was at the wrong time because it was December and it&#8217;s not the best time for Luxembourg but I still think it&#8217;s really worth a visit for a nice forest walking. Got off the bus and the first thing you will notice is the sign to Mullerthal Trail, so no need to ask anybody just look around a little bit. I found the trail was quite easy and the rock formations are really beautiful. I think you could camp there as well if you&#8217;re well prepared.</p>

<p><a href="#" rel="attachment wp-att-1014"><img class="size-medium wp-image-1014 cool_border alignnone" alt="Signs in Mullerthal Trail" src="https://www.noppanit.com/wp-content/uploads/2013/01/IMG_0009_edited-1-300x200.jpg" width="300" height="200" /></a></p>

<p><a href="#" rel="attachment wp-att-1015"><img class="size-medium wp-image-1015 cool_border alignnone" alt="Mullerthal Trail" src="https://www.noppanit.com/wp-content/uploads/2013/01/IMG_0002_edited-1-300x200.jpg" width="300" height="200" /></a></p>

<p>I walked from Echternach to Berdorf because I didn&#8217;t have enough time. The day was short during the winter and I didn&#8217;t want to spend a night there without something warm. From Berform you can get a bus back to Luxembourg City easily with the same bus number 110 or 111.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Jan 11th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/travel/'>travel</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        
            <a href="/posts/5" class="prev">Prev</a>
        
    
    
        <a href="/posts/7" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Noppanit Charassinvichai

</footer>
	<script src="/javascripts/slash.js"></script>

<!-- <script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'noppanit';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-11403715-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>