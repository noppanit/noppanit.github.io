
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>My Blog</title>
	<meta name="author" content="Noppanit Charassinvichai">

	
	<meta name="description" content="If you&#8217;re in Moscow and you want somewhere to just sit down and catch up with some stuff. Or you just want to have a place to read. I &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml">
	<link rel="canonical" href=" https://www.noppanit.com/posts/3/index.html" />
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">My Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.noppanit.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/noppanit" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/noppanit" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.noppanit.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/ziferblat-pay-per-minute-cafe-moscow-russia/">
		
			Ziferblat, Pay-per-minute Cafe in Moscow, Russia.</a>
	</h2>
	<div class="entry-content">
		<p>If you&#8217;re in Moscow and you want somewhere to just sit down and catch up with some stuff. Or you just want to have a place to read. I recommend <a href="http://pushkin.ziferblat.net/en/" title="Ziferblat">Ziferblat</a>, it&#8217;s pay-per-minute cafe in Central Moscow.</p>

<p>Just 5-min walk from Tverskaya Station (Тверская). Then look for this sign.</p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-18-at-22.52.43.png"></p>

<p>You have to ring the bell and the security guard will buzz you in then you have to walk upstairs (2nd floor). Unfortunately, at least when I was there people speak little English but understandable. Also, the people are really friendly over there. You just need to tell your name and pay at the end when you&#8217;re ready to rome Moscow again.</p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-18-at-23.08.45.png"></p>

		
		
	</div>


<div class="meta">
	<div class="date">




May 18th, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/travel/'>travel</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/contextual-preloading-ajax-request/">
		
			Contextual Preloading for Ajax Request.</a>
	</h2>
	<div class="entry-content">
		<p>I have just heard this from my friend <a href="https://twitter.com/rajveerr" title="rajveerr twitter">@rajveerr</a> about pre-loading at the global level, this concept is not new but I have just learned it.. Usually and I think everyone has done it before. People would do something like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#link1&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Do some funky spinning wheel</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/echo/json&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">success</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="c1">// Cancel that funky spinning wheel</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you have to do this for every single ajax request. So, here&#8217;s how you would do that in a contextual level.</p>

<iframe width="100%" height="300" src="//jsfiddle.net/noppanit/y63n5/embedded/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>


<p>The trick is that in each ajax request you need to add context option. I used zepto as an example but jquery should work the same. The reason is that is <strong>e.target</strong> behaves differently each browser. Also, usually Ajax request would be fired from <strong>#document</strong> level that means your <strong>e.target</strong> would be your </p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#link1&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/echo/json&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">context</span><span class="o">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="o">&lt;</span><span class="err">/strong&gt;,</span>
</span><span class='line'>        <span class="nx">success</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>By doing this if you want your pre-loader you just need to add <strong>.ajaxContainer</strong> class to your container.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




May 10th, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/javascript/'>javascript</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/bouldering-gym-kadikoy-istanbul/">
		
			Bouldering Gym in Kadıköy, Istanbul</a>
	</h2>
	<div class="entry-content">
		<p>I would like to just contribute more to the bouldering in Istanbul. Since, I have been in Istanbul for over a month and I like bouldering. However, after a bit of searching I found little information about bouldering gyms in Istanbul. So far, I have been to two gyms and I&#8217;d like to share one of them first.</p>

<p>It&#8217;s called <a href="http://www.boulderistanbul.com/" title="boulder istanbul">Boulder Istanbul</a>.</p>

<p><strong>How to get there</strong><br/>
This one is quite easy to get to and the location on the map below is quite accurate. I have checked in myself.</p>

<p>You can get the metro to Kadıköy and then walk from there for only 10-15 minutes or you can get the metrobus to Söğütlüçeşme which is the terminal station at the Asian side and then walk for 15-20 minutes. It&#8217;s quite a nice walk through kebab shops.</p>

<p><strong>Some pics</strong></p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2014/03/20140302_141441.jpg"></p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2014/03/20140302_141348.jpg"></p>

<p><img src="https://www.noppanit.com/wp-content/uploads/2014/03/20140302_141636.jpg"></p>

<p><strong>Price</strong><br/>
It&#8217;s only 15 TL for a day pass.</p>

<p><strong>Official address</strong><br/>
<span class="adr"><br /> <span class="street-address">Nüzhetefendi Sokak No:54 (Rıhtım caddesinin 3 üst paraleli)</span><br /> <span class="locality">Kadıköy</span></br><br /> <span class="region">Istanbul</span><br /> </span></p>

		
		
	</div>


<div class="meta">
	<div class="date">




Mar 2nd, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/travel/'>travel</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/example-require-js-optimizer/">
		
			Example of Require.js Optimizer.</a>
	</h2>
	<div class="entry-content">
		<p>I decided to write this blog post to show how easy it is to setup require.js optimizer and how many bytes it saves.</p>

<p>To make it as simple as possible, I created this repository on <a href="https://github.com/noppanit/requirejs-optimization-example" title="Require.js optimisation example">github</a> to show the real example.</p>

<p>This is the results of optimisation.</p>

<p><img src="http://www.noppanit.com/wp-content/uploads/2014/02/Screen-Shot-2014-02-09-at-19.45.38.png"></p>

<p>And this is the result of non-optimized version.</p>

<p><img src="http://www.noppanit.com/wp-content/uploads/2014/02/Screen-Shot-2014-02-09-at-19.46.59.png"></p>

<p>It&#8217;s clear to see that the optimized version takes shorter to load the script, where as the non-optimized version in the files might be smaller but with a lot of calls, it takes longer to load all the scripts.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Feb 9th, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/javascript/'>javascript</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/merge-documents-two-collections-together-mongodb/">
		
			Merge Documents From Two Collections Together in MongoDb</a>
	</h2>
	<div class="entry-content">
		<p>The problem is I have a lot of documents in one collection and even a lot more documents in another collection. I want to merge those documents together but I don&#8217;t want to write a lot of code to merge those documents together. It also might take a lot of time to do it.</p>

<p>MongoDb comes with <a href="http://docs.mongodb.org/manual/core/map-reduce/" title="mongodb map reduce">map/reduce</a> which is a cool feature you can use to achieve something like this. If you don&#8217;t know what map/reduce is I wrote an <a href="http://www.noppanit.com/mapreduce-dummies/">article</a> like this sometime ago.</p>

<p>Let&#8217;s say you have one collection with this document. Let&#8217;s say it&#8217;s <strong>products</strong> collection.</p></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;_id&quot;</span> <span class="p">:</span> <span class="err">ObjectId(</span><span class="s2">&quot;52e05133c68f0b2a95e2b67b&quot;</span><span class="err">)</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;product_id&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;title&quot;</span> <span class="p">:</span> <span class="s2">&quot;Sharpie&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And another document in <strong>prices</strong> collection.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;_id&quot;</span> <span class="p">:</span> <span class="err">ObjectId(</span><span class="s2">&quot;52e05473c68f0b2a95e2b682&quot;</span><span class="err">)</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;product_id&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;price&quot;</span> <span class="p">:</span> <span class="mi">99</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I want to end up with this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span> <span class="nt">&quot;_id&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nt">&quot;value&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;title&quot;</span> <span class="p">:</span> <span class="s2">&quot;Sharpie&quot;</span><span class="p">,</span> <span class="nt">&quot;price&quot;</span> <span class="p">:</span> <span class="mi">99</span> <span class="p">}</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here&#8217;s what you can do. Insert your data first.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;product_id&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span> <span class="o">:</span> <span class="s2">&quot;Sharpie&quot;</span><span class="p">});</span>
</span><span class='line'><span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;product_id&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span> <span class="o">:</span> <span class="s2">&quot;Sticky&quot;</span><span class="p">});</span>
</span><span class='line'><span class="nx">db</span><span class="p">.</span><span class="nx">prices</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;product_id&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span> <span class="o">:</span> <span class="mi">99</span><span class="p">});</span>
</span><span class='line'><span class="nx">db</span><span class="p">.</span><span class="nx">prices</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;product_id&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span> <span class="o">:</span> <span class="mi">30</span><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you build maps to get key/value from the documents</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">products_map</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">emit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">product_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;title&quot;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">prices_map</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">emit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">product_id</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;price&quot;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">price</span><span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you build your reduce function</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">r</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;title&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s2">&quot;price&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">values</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">title</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">result</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">title</span><span class="p">;}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">price</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span><span class="nx">result</span><span class="p">.</span><span class="nx">price</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">price</span><span class="p">;}</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you run your map/reduce function.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">res</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">products</span><span class="p">.</span><span class="nx">mapReduce</span><span class="p">(</span><span class="nx">products_map</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="p">{</span><span class="nx">out</span><span class="o">:</span> <span class="p">{</span><span class="nx">reduce</span> <span class="o">:</span> <span class="s1">&#39;joined&#39;</span><span class="p">}});</span>
</span><span class='line'><span class="nx">res</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">prices</span><span class="p">.</span><span class="nx">mapReduce</span><span class="p">(</span><span class="nx">prices_map</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="p">{</span><span class="nx">out</span><span class="o">:</span> <span class="p">{</span><span class="nx">reduce</span> <span class="o">:</span> <span class="s1">&#39;joined&#39;</span><span class="p">}});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you will get another collection <strong>joined</strong> with the information you want. One caveat is right now map/reduce function will result in <strong>value : { &#8220;field&#8221; : &#8220;value&#8221; }</strong>.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Jan 23rd, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/thinking-functionally-for-idiots/">
		
			Thinking Functionally for Idiots.</a>
	</h2>
	<div class="entry-content">
		<p>I just want to write this post for myself and lucky people who found this post from Google. The world has come to the era of functional. When I pair with my colleagues I always hear &#8220;That&#8217;s not so functional&#8221; or &#8220;Should we use Guava or functional Java&#8221; or &#8220;Wouldn&#8217;t it be easier if we use Scala&#8221;?. What do these mean? Why should I have to care if my code looks functional and what benefits do I get. This post is going to be a really easy post to follow that&#8217;s why the title &#8220;Thinking functionally for idiots&#8221;. If you want more technical I highly recommend this <a href="http://www.ibm.com/developerworks/java/library/j-ft1/index.html" title="Thinking functionally Part I">post</a> from Neal Ford.</p>

<p><strong>Why functional programming?</strong><br/>
There are a few concepts of functional programming but you can find the full concepts <a href="https://en.wikipedia.org/wiki/Functional_programming#Concepts">here</a>. I don&#8217;t really want to explain about higher-order or first-class functions because someone else can explain it better than myself. In summary, I really think the benefits of doing functional programming is you tend to avoid bugs and the code might be more readable. These can be achieved by avoiding state and mutable data which most of the sites seem to refer to these two benefits. I would like to show this in a simple example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span> <span class="o">,</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">multipledByTwo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span><span class="o">(</span><span class="n">Integer</span> <span class="n">number</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">multipledByTwo</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">number</span> <span class="o">*</span> <span class="mi">2</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can see that this piece of code is really simple and what it&#8217;s doing is just multiply every element of the list by two. What&#8217;s wrong with this piece of code? First of all, <strong>multipledByTwo</strong> list acts like a temporary list which holds the answer and programmer can do something else with it.</p>

<p>Let&#8217;s see another example. This is the modified version to be more functional.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// Interface</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="n">S</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">T</span> <span class="nf">apply</span><span class="o">(</span><span class="n">S</span> <span class="n">in</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// MappingClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">MappingClass</span><span class="o">&lt;</span><span class="n">S</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">map</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">S</span><span class="o">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">fun</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;();</span>
</span><span class='line'>        <span class="k">for</span><span class="o">(</span><span class="n">S</span> <span class="n">item</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fun</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">item</span><span class="o">));</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// To Test</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="n">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>
</span><span class='line'>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">numbers</span><span class="o">,</span> <span class="k">new</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Integer</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">input</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">results</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>We create one generic function which is the interface <strong>Function</strong> this will represent higher-order function which we can parse to another method. Then we create a recursive method which will execute the function and put in another list. This way we don&#8217;t create mutable object and we don&#8217;t retain any state. What comes in the function comes out as the results.</p>

<p>What do you think? Is this better than the other? If it&#8217;s Java I highly doubt that. Java is still not mature enough to do functional programming. But things are looking better in Java 8.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Jan 20th, 2014</div>
	<div class="tags">


	<a class='category' href='/blog/categories/java/'>java</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/never-clean-havent-turkish-bath/">
		
			You Have Never Been Clean, if You Haven&#8217;t Been to the Turkish Bath.</a>
	</h2>
	<div class="entry-content">
		<p>Istanbul is the next closest thing I could come during Christmas. It&#8217;s just 4-hour from London and it&#8217;s a fantastic place to visit. I know when you think about Turkey you would think about the mosques, markets and kebap. There&#8217;s nothing wrong with that and I really enjoy walking around the buzzling Grand Bazaar (Büyük Çarşı). But there&#8217;s one thing I think everybody should be doing while you&#8217;re in Turkey is the Turkish bath.</p>

<p>There&#8217;s a saying I don&#8217;t remember who so I couldn&#8217;t quote here. &#8220;You have never been clean, if you haven&#8217;t been to the Turkish bath&#8221; and I think it&#8217;s really true.</p>

<p>Some people might say, I wouldn&#8217;t want a sweaty dude to scrub or massage yourself. But I think you should try everything until you can say you hate it.</p>

<p>So, I have scouted over the Internet and I found the article from the <a href="http://www.theguardian.com/travel/2013/mar/22/istanbul-karakoy-top-10-cafes-shops-galleries" title="guardian">Guardian</a> and <a href="http://www.tripadvisor.co.uk/Attraction_Review-g293974-d3626134-Reviews-Kilic_Ali_Pasa_Hamami-Istanbul.html" title="trip advisor">Trip Advisor</a>. I found this place <a href="http://kilicalipasahamami.com/">Kilic Ali Pasa</a>. So, I booked the place.</p>

<p>The first experience when you walked in, you will be greeted with a welcome drink and the staff will be giving you choices. You can choose to scrub yourself or you can have somebody to help you. After that, you change clothes to just the towel then the staff will guide you to Göbektaşı; the room with a big marble table in the middle. You will heat yourself up to be ready. The staff will pour hot and warm water to get your body ready then he will make you embarrassed by exfoliating your body from head to toe. I shower twice a day and I can still see my dead skin coming off. Then the staff will start the Köpük which is bubble soap wash. Then he will massage you a bit. After, everything is done he will lead you to the lounge area where you can sit and relax for as long as you want. You can you the bath again as many times as you want as well.</p>

<p>It&#8217;s a very relaxing bath and I think everybody should try at least for once so you will know whether you like it. I know I will come back for another Hamami for sure.</p>

<p>A little tip or actually my own mistake, bring your clean clothes with you or if you want to put on your dirty clothes when you&#8217;re super clean.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Dec 27th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/travel/'>travel</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/mapreduce-dummies/">
		
			MapReduce for Dummies.</a>
	</h2>
	<div class="entry-content">
		<p>If you are a programmer or work in IT organisations. You must have heard the term &#8220;MapReduce&#8221; at some point. Some of you might be like myself, wondering what does it mean. It&#8217;s coined by very smart people from Google (<a href="https://en.wikipedia.org/wiki/Mapreduce" title="MapReduce">reference</a>). So, it must be good. Also, you must have heard this little project called &#8220;<a href="https://hadoop.apache.org/" title="Hadoop">Hadoop</a>&#8221; as an opensource for MapReduce. I have known it for a while but never get a full understanding of what it really means. People always mention that &#8220;Oh, you have a lot of data, MapReduce is very fast. Use that&#8221; but ever wonder why?</p>

<p>So, I would like to explain this to my blog as Einstein once said <a href="http://www.brainyquote.com/quotes/quotes/a/alberteins383803.html#y5CAlRzOrI20wJPS.99"" title="einstein quote">&#8220;If you can&#8217;t explain it simply, you don&#8217;t understand it well enough&#8221;</a>.</p>

<p>If you like reading then this <a href="https://www.usenix.org/legacy/publications/library/proceedings/osdi04/tech/full_papers/dean/dean_html/" title="MapReduce: Simplified Data Processing on Large Clusters">article</a> is for you, written by Jeff and Sanjay from Google.</p>

<p>Here&#8217;s my version of what it means. MapReduce consists of two parts. Map and Reduce, Duh? I think the terms is a bit confusing if you don&#8217;t know what it means but I don&#8217;t know what to call it instead of this either. Let&#8217;s have a look at the first part Map.</p>

<p>Map really is like what we know in every language. <strong>Map&lt;Key, Value></strong> in Java. It has key and value. For example, if your country wants to run an election, you have four parties to choose from Party A, Party B, Party C and Party D. It&#8217;d be like this.</p>

<p><img src="http://www.noppanit.com/wp-content/uploads/2013/12/Screen-Shot-2013-12-21-at-21.34.00.png" title="City eletion scores" ></p>

<p>The key would be your party name. The value would be the votes for each of the key. So, this is how would you process in your computer. Let&#8217;s go back a little bit and have a look at raw data.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>PartyA, 10
</span><span class='line'>PartyA, 5
</span><span class='line'>PartyA, 2
</span><span class='line'>PartyB, 5
</span><span class='line'>PartyB, 10
</span><span class='line'>PartyB, 20
</span><span class='line'>PartyB, 30
</span><span class='line'>PartyC, 9
</span><span class='line'>PartyC, 8
</span><span class='line'>PartyC, 7
</span><span class='line'>PartyC, 5
</span><span class='line'>PartyD, 2
</span><span class='line'>PartyD, 1
</span><span class='line'>PartyD, 8
</span><span class='line'>PartyD, 3</span></code></pre></td></tr></table></div></figure>


<p>Then you would get something like this in Ruby. (If I show the code how I transformed this many ruby programmers might scream at me so you can do whatever you like to make it like that)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{"Party A"=&gt;[10, 5, 9, 2]}
</span><span class='line'>{"Party B"=&gt;[5, 10, 20, 30]}
</span><span class='line'>{"Party C"=&gt;[9, 8, 7, 5]}
</span><span class='line'>{"Party D"=&gt;[2, 1, 8, 3]}</span></code></pre></td></tr></table></div></figure>


<p>Now the part &#8220;Map&#8221; is done we can do the next part which is reduce. Reduce is where you process your data at your will on each key to get one or zero result. In this case we want to get the summation of the votes on each party. Luckily ruby comes with this already.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[10, 5, 9, 2].reduce(:+) # =&gt; 26
</span><span class='line'>[5, 10, 20, 30].reduce(:+) # =&gt; 65
</span><span class='line'>[9, 8, 7, 5].reduce(:+) # =&gt; 29
</span><span class='line'>[2, 1, 8, 3].reduce(:+) # =&gt; 14</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s it now we know that PartyB won the election.</p>

<p>So, here&#8217;s the important question. Why it&#8217;s fast?<br/>
Imagine, if in your country you have 100 cities and each city sends all the cards to the capital city to count, the process would be sequential and might be slow. So, we delegate that to each city then send the final result back to the capital city. That&#8217;s why you will hear a lot of people talking about &#8220;node&#8221;, &#8220;cluster&#8221; or &#8220;distributed&#8221; in MapReduce, because we delegate that to thousands of machines connected together. The classic example on the Internet right now is word counts which imagine how many documents or websites Google has to process each day.</p>

<p>That&#8217;s it. Any feedback is very welcome.</p>

<p>Reference:<br/>
<a href="http://www-01.ibm.com/software/data/infosphere/hadoop/mapreduce/">http://www-01.ibm.com/software/data/infosphere/hadoop/mapreduce/</a><br/>
<a href="https://hadoop.apache.org/docs/r1.1.1/mapred_tutorial.html">https://hadoop.apache.org/docs/r1.1.1/mapred_tutorial.html</a><br/>
<a href="http://www.onebigfluke.com/2013/01/why-is-map-reduce-faster-practical.html">http://www.onebigfluke.com/2013/01/why-is-map-reduce-faster-practical.html</a><br/>
<a href="http://stevekrenzel.com/finding-friends-with-mapreduce">http://stevekrenzel.com/finding-friends-with-mapreduce</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">




Dec 21st, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/knowledges/'>knowledges</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/shoot-astrophotography-absolute-dummies-like/">
		
			How to Shoot Astrophotography for Absolute Dummies, Like Me.</a>
	</h2>
	<div class="entry-content">
		<p>Ok, no more murmur I will just cut to the chest. It&#8217;s because I&#8217;m not really a professional and my picture is far from professional, but it&#8217;s a good starting point to any one hasn&#8217;t done it before.</p>

<h2>Equipments</h2>

<ol>
<li>Tripod</li>
<li>DSLR</li>
</ol>


<h2>How to?</h2>

<ol>
<li>Find the darkest and clear night, full moon won&#8217;t work. Also, if you live in the city then go out. City light will just noise your dark sky.</li>
<li>Mount your camera to the tripod</li>
<li>Start with ISO 800</li>
<li>Widest aperture, start with F4</li>
<li>Manual focus and adjust to infinity</li>
<li>Here&#8217;s a little trick, there&#8217;s a 500 or 600 rule. The idea is to divide 500 or 600 with your focal length. For example, if you are at 18mm then 500/18 = 27. That&#8217;s your shutter speed. This is to prevent any star trail.</li>
<li>Adjust one thing at a time. For example, ISO first and then aperture to get your best results.</li>
</ol>


<p>Have fun! Play with your settings.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Dec 18th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/digital-camera/'>digital camera</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/found-perfect-travel-tripod-manfrotto-befree/">
		
			I Have Found My Perfect Travel Tripod. Manfrotto Befree</a>
	</h2>
	<div class="entry-content">
		<p>This might just be me and this blog post is just my opinion and just give people another opinion if they&#8217;re interested in buying a travel tripod. I&#8217;m sure you will own either one or two tripods if you&#8217;re a serious photographer. Even if you&#8217;re not there&#8217;s a chance that you will own at least one. I have one as well, but very clunky and heavy which I got it really cheap because of the heavy material. And I thought I didn&#8217;t mind to carry it around I can just put it in a car. However, I rarely take it with me when I&#8217;m on a trip. Why? because as you travel a lot, you tend to travel light and those tripods won&#8217;t fit in your suitcase. Also, you don&#8217;t want to carry huge tripod around the airport, I learnt that the hard way when I was in India. I needed to get my tripod scanned and wrapped and scanned again. They had to make sure I could not dissemble my tripod to be a weapon or some sort. It was fun though.</p>

<p>Now I have found this, <a href="http://www.manfrotto.com/befree" title="Manfrotto Befree">Manfrotto Befree</a>. Why I think it&#8217;s perfect for me. Because I can fit that in my suitcase so I won&#8217;t have any problem carrying it with me on a trip and it&#8217;s really small so I will have less trouble carrying it with me when I&#8217;m hiking. However, it&#8217;s not carbon fibre so it won&#8217;t be super light, but because of its size it&#8217;s not too heavy. I can carry it with my 5D all day.</p>

<p>That&#8217;s the best bit for a travel tripod. However, you won&#8217;t use that for a 9-hour long exposure for sure as it&#8217;s not that sturdy but for taking night views with not-so-long exposure or even fireworks it works really well. So, it&#8217;s just another opinion if you&#8217;re thinking of buying a travel tripod.</p>

		
		
	</div>


<div class="meta">
	<div class="date">




Dec 17th, 2013</div>
	<div class="tags">


	<a class='category' href='/blog/categories/digital-camera/'>digital camera</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
        
            <a href="/posts/2" class="prev">Prev</a>
        
    
    
        <a href="/posts/4" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Noppanit Charassinvichai

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'noppanit';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-11403715-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>