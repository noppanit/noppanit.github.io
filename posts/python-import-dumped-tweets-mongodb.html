
<!doctype>
<html lang="en">
  <head>
    <meta content='Python to import your dumped tweets to MongoDb - Noppanit' name='title' />
    <meta content='Python to import your dumped tweets to MongoDb - Noppanit' name='og:title' />
    <title>Python to import your dumped tweets to MongoDb - Noppanit</title>
    <link href='https://www.noppanit.com/images/fav.png' rel='shortcut icon'>
<link href='https://www.noppanit.com/stylesheets/style.css' rel='stylesheet' type='text/css' />
<link href='https://www.noppanit.com/stylesheets/syntax.css' rel='stylesheet' type='text/css' />

<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <meta content='https://www.noppanit.com/posts/python-import-dumped-tweets-mongodb' property='og:url' />
  <meta content="I’m playing around with my tweets. Just so you’re aware that you could download your entire tweets and play around wi..." property='og:description' />
  <meta content="article" property="og:type" />

<!-- - -->





  </head>
  <body class="lh-copy dark-gray pa0 f6 sans-serif bg-super-white">
    <header class="tc mt4">
      <a href="https://www.noppanit.com">
        <img src="https://www.noppanit.com/images/scribble.png" alt="Home" width="53" height="59">
      </a>
      <p>Noppanit</p>
    </header>
    <div class="mw7 bg-white mt4 mb3 center br2-ns bt bb ba-ns b--light-gray">
      <nav class="bb b--light-gray pv4 tc" aria-label="Main">
        
      </nav>

      <main class="tl f6 relative pa4 pa5-ns overflow-hidden">
        
          <div class="mb4">
            <div class="fw600 light-silver mt1">04 Sep 2013</div>
            <h1 class="ttu f3 mt0 lh-title cb mb2">
              
              Python to import your dumped tweets to MongoDb
            </h1>
            
          </div>
        
        <div class="markdown-body">
          <p>I’m playing around with my tweets. Just so you’re aware that you could download your entire tweets and play around with it. The format is JSON so I think it makes perfect sense to dump this to MongoDB. But you can’t just import that straight away it needs some manipulation. I’m not good at Python so the code here might be tedious for python dudes. I’m going to use this data in my analysis, which will be captured in the next blog post.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pymongo</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">path</span> <span class="o">=</span> <span class="s">'./data'</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">MongoClient</span><span class="p">(</span><span class="s">'localhost'</span><span class="p">,</span> <span class="mi">27017</span><span class="p">)</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">tweets</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">infile</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"*.js"</span><span class="p">)):</span>
                <span class="n">content</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">indexOfFirstEqualSign</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">"="</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">pureJson</span> <span class="o">=</span> <span class="n">content</span><span class="p">[</span><span class="n">indexOfFirstEqualSign</span><span class="p">:]</span>
                <span class="n">jsonifedData</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pureJson</span><span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">tweets_collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">jsonifedData</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>The data is kept in <strong>data</strong> folder.</p>

        </div>
        <p class="mt4">
  Til next time,<br>
  noppanit
  <span class="silver">at 00:00</span>
</p>
<img src="https://www.noppanit.com/images/scribble3.png" alt="scribble" />

      </main>
      <section class="fixed-l mw7 center w-100 top-50 tc pb4 nt4">
  
    <a href="https://www.noppanit.com/posts/paris-2013-food-quest" class="no-underline f1 light-blue hover-silver nl5 fl-l ph3">‹</a>
  
  
    <a href="https://www.noppanit.com/posts/script-merge-csv-files-one-file" class="no-underline f1 light-blue hover-silver nr5 fr-l ph3">›</a>
  
</section>
    </div>
    <footer class="mw7 center tc pt3 pb4 silver">
      Built with Jekyll using <a href="http://github.com/muan/scribble" class="link silver hover-blue pv1">Scribble</a>.
      <img src="https://www.noppanit.com/images/scribble2.png" alt="scribble" class="mt4 db center" />
    </footer>
  </body>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</html>
